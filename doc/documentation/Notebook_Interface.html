<!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-107286198-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments)};
  gtag('js', new Date());

  gtag('config', 'UA-107286198-1');
</script>

<!DOCTYPE html>
<html>
<head><meta charset="utf-8" />
<title>Notebook_Interface</title><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.10/require.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>








<!-- Custom stylesheet, it must be in the same directory as the html file -->
<link rel="stylesheet" href="custom.css">

<!-- Loading mathjax macro -->
<!-- Load mathjax -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS_HTML"></script>
    <!-- MathJax configuration -->
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
            processEscapes: true,
            processEnvironments: true
        },
        // Center justify equations in code and markdown cells. Elsewhere
        // we use CSS to left justify single line equations in code cells.
        displayAlign: 'center',
        "HTML-CSS": {
            styles: {'.MathJax_Display': {"margin": 0}},
            linebreaks: { automatic: true }
        }
    });
    </script>
    <!-- End of mathjax configuration --></head>


 <meta name="viewport" content="width=device-width, initial-scale=1">
 <link rel="stylesheet" href="https://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Droid+Sans:400,700" rel="stylesheet">

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script>

<style>  /* defined here in case the main.css below cannot be loaded */
.lev1 {margin-left: 80px}
.lev2 {margin-left: 100px}
.lev3 {margin-left: 120px}
.lev4 {margin-left: 140px}
.lev5 {margin-left: 160px}
.lev6 {margin-left: 180px}
</style>

<link rel="stylesheet" type="text/css" href="../../css/jt.css">
<link rel="stylesheet" type="text/css" href="../../css/toc2.css">

<script src="../../js/doc_toc.js"></script>

 <script src="../../js/docs.js"></script>

<script>
    MathJax.Hub.Config({
        "HTML-CSS": {
            preferredFont: "TeX",
            availableFonts: ["STIX","TeX"],
            styles: {
                scale: 110,
                ".MathJax_Display": {
                    "font-size": "110%",
                }
            }
        }
    });
</script>

<script>

function filterDataFrame(id) {
    var input = document.getElementById("search_" + id);
    var filter = input.value.toUpperCase();
    var table = document.getElementById("dataframe_" + id);
    var tr = table.getElementsByTagName("tr");

    // Loop through all table rows, and hide those who don't match the search query
    for (var i = 1; i < tr.length; i++) {
        for (var j = 0; j < tr[i].cells.length; ++j) {
            var matched = false;
            if (tr[i].cells[j].innerHTML.toUpperCase().indexOf(filter) != -1) {
                tr[i].style.display = "";
                matched = true
                break;
            }
            if (!matched)
                tr[i].style.display = "none";
        } 
    }
}

function sortDataFrame(id, n, dtype) {
    var table = document.getElementById("dataframe_" + id);

    var tb = table.tBodies[0]; // use `<tbody>` to ignore `<thead>` and `<tfoot>` rows
    var tr = Array.prototype.slice.call(tb.rows, 0); // put rows into array

    if (dtype === 'numeric') {
        var fn = function(a, b) { 
            return parseFloat(a.cells[n].textContent) <= parseFloat(b.cells[n].textContent) ? -1 : 1;
        }
    } else {
        var fn = function(a, b) {
            var c = a.cells[n].textContent.trim().localeCompare(b.cells[n].textContent.trim()); 
            return c > 0 ? 1 : (c < 0 ? -1 : 0) }
    }
    var isSorted = function(array, fn) {
        if (array.length < 2)
            return 1;
        var direction = fn(array[0], array[1]); 
        for (var i = 1; i < array.length - 1; ++i) {
            var d = fn(array[i], array[i+1]);
            if (d == 0)
                continue;
            else if (direction == 0)
                direction = d;
            else if (direction != d)
                return 0;
            }
        return direction;
    }

    var sorted = isSorted(tr, fn);

    if (sorted == 1 || sorted == -1) {
        // if sorted already, reverse it
        for(var i = tr.length - 1; i >= 0; --i)
            tb.appendChild(tr[i]); // append each row in order
    } else {
        tr = tr.sort(fn);
        for(var i = 0; i < tr.length; ++i)
            tb.appendChild(tr[i]); // append each row in order
    }
}

$( document ).ready(function(){

            var cfg={'threshold':4,     // depth of toc (number of levels)
             // 'number_sections': true,  // sections numbering
             'number_sections': false, 
             'toc_cell': false,          // useless here
             'toc_window_display': true, // display the toc window
             "toc_section_display": "block", // display toc contents in the window
             // 'sideBar':true,      
             'sideBar':true,       // sidebar or floating window
             'navigate_menu':false       // navigation menu (only in liveNotebook -- do not change)
            }

            var st={};                  // some variables used in the script
            st.rendering_toc_cell = false;
            st.config_loaded = false;
            st.extension_initialized=false;
            st.nbcontainer_marginleft = $('#notebook-container').css('margin-left')
            st.nbcontainer_marginright = $('#notebook-container').css('margin-right')
            st.nbcontainer_width = $('#notebook-container').css('width')
            st.oldTocHeight = undefined
            st.cell_toc = undefined;
            st.toc_index=0;

            // fire the main function with these parameters



            table_of_contents(cfg,st);

            var file=documentationDict[$("h1:first").attr("id")];
            var path="http://vatlab.github.io/sos-docs"
            $("#toc-level0 a").css("color","#126dce");
            $('a[href="#'+$("h1:first").attr("id")+'"]').hide()
            var docs=documentation;
            var pos=documentation.indexOf(file);
        
            for (var a=pos;a>=0;a--){
                  var name=docs[a]
                  $('<li><a href="'+path+'/doc/documentation/'+name+'.html">'+name.replace(/_/g," ")
                   + '&nbsp ' + '<i class="fa ' +
                      (a === pos ? 'fa-caret-down' : 'fa-caret-right') + '"></i>' +'</a></li>').insertBefore("#toc-level0 li:eq(0)");
            }
            $('a[href="'+path+'/doc/documentation/'+file+'.html'+'"]').css("color","#126dce");


            for (var a=pos+1;a<docs.length;a++){
                  var name=docs[a]
                  $(".toc #toc-level0").append('<li><a href="'+path+'/doc/documentation/'+name+'.html">'+name.replace(/_/g," ")
                    + '&nbsp' + '<i class="fa fa-caret-right"></i>' +'</a></li>');
            }

            // var docs=documentation
            // for (var a =0;a<docs.length;a++){
            //       var name =docs[a];
            //       $(".toc #toc-level0").append('<li><a href="'+path+'/doc/documentation/'+name+'.html">'+name.split("_").join(" ")+'</a></li>');
            // }
            // var home=$("#toc-level0 #indexHome");
          
            // home.insertBefore("#toc-level0 li:eq(0)");

            // $("#toc-level0 li").filter(".home").insertBefore($("#toc-level0 li").filter(':nth-child(1)'));
            // $("#toc").attr("style","max-height:938px")


    });
</script><style>  /* defined here in case the main.css below cannot be loaded */

 .lan_SoS {}.lan_R .input_prompt { background-color: #FDEDEC !important }.lan_Bash .input_prompt { background-color: #E6EEFF !important }.lan_Julia .input_prompt { background-color: #ebd8eb !important }.lan_MATLAB .input_prompt { background-color: #dff8fb !important }.lan_Python3 .input_prompt { background-color: #FFE771 !important }.lan_django_extensions {}.lan_jupyter3_python_3 {}

</style>
<body>
  <div tabindex="-1" id="notebook" class="border-box-sizing">
    <div class="container" id="notebook-container">

<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Jupyter-Notebook-Interface-of-SoS">Jupyter Notebook Interface of SoS<a class="anchor-link" href="#Jupyter-Notebook-Interface-of-SoS">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="http://jupyter.org/">Jupyter</a> notebook is a web application that allows you to create documents with live code and results. The underlying interpreters of the cells are called <strong>kernel</strong>. For example, you can use a <code>python</code> kernel to interpret python expressions, or a <code>ir</code> kernel to interpret <code>R</code> commands. You can use sos within a <code>python</code> kernel by loading the <a href="../tutorials/Using_SoS_with_IPython.html"><code>sos_magic</code> ipython extension</a>, or use a <code>sos</code> kernel to work in a complete SoS environment.</p>
<p>Comparing to a regular Jupyter notebook, the SoS Jupyter notebook provides the following features:</p>
<ul>
<li><strong>Enhanced Python3 kernel</strong> The SoS kernel is based on Python 3 but it provides additional features such as string interpolation.</li>
<li><strong>Full-blown workflow system</strong> SoS is a workflow system that defines many functions (actions) to execute scripts in different languages. In addition to running steps and workflows defined in single cells (magic <code>%run</code>), magics such as <code>%sosrun</code> and <code>%sossave</code> can be used to execute workflows defined in the entire notebook. </li>
<li><strong>Multi-Kernel notebook</strong> In addition to the ability to execute SoS workflows within Jupyter, the SoS kernel allows you to start subkernels (e.g. <a href="https://github.com/IRkernel/IRkernel"><code>irkernel</code></a> for <a href="https://www.r-project.org/">the R langauage</a>) and switch between the subkernels in the same notebook. This allows for truly integrated data analysis using different langauages.</li>
<li><strong>Data-exchange between kernels</strong> Using a data exchange mechanism, SoS allows you to exchange variables between supported languages either explicitly, or implicitly for variables with names starting with <code>sos</code>.</li>
<li><strong>Scratch-pad</strong> You can evaluate any statement in a side panel without effecting the main notebook. This provides a scratch pad for you to test your scripts before incorporating them to the main notebook.</li>
<li><strong>Line-by-line execution</strong> SoS provides a shortcut (Ctrl-Shift-Enter) for you to send selected text or current line to the panel cell for evaluation, allowing you to step through code cell for easy debugging.</li>
<li><strong>Preview of variables and files</strong> A magic <code>%preview</code> is provided to preview files and variables (and expressions) in multiple kernels. The output of the preview magic is displayed in the side panel (if the panel is open) which effectively reduces the size of the main notebook.</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Installing-the-SoS-kernel-">Installing the SoS kernel <a id="Installing_the_SoS_kernel" /><a class="anchor-link" href="#Installing-the-SoS-kernel-">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The SoS installation process will install a SoS kernel by default. To verify if you have the sos kernel installed, use command <code>jupyter kernelspec list</code> from command line (here we use the <code>!</code> magic to run commands from Jupyter notebook):</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="err">!</span><span class="n">jupyter</span> <span class="n">kernelspec</span> <span class="nb">list</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Available kernels:
  bash                 /Users/bpeng1/Library/Jupyter/kernels/bash
  django_extensions    /Users/bpeng1/Library/Jupyter/kernels/django_extensions
  imatlab              /Users/bpeng1/Library/Jupyter/kernels/imatlab
  ir                   /Users/bpeng1/Library/Jupyter/kernels/ir
  julia-0.6            /Users/bpeng1/Library/Jupyter/kernels/julia-0.6
  jupyter3_python_3    /Users/bpeng1/Library/Jupyter/kernels/jupyter3_python_3
  python3              /Users/bpeng1/anaconda3/share/jupyter/kernels/python3
  sos                  /Users/bpeng1/anaconda3/share/jupyter/kernels/sos
</pre>
</div>
</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>and check if you have <code>sos</code> listed as one of the kernels. If not, try to re-install SoS using <code>pip3 install sos --upgrade</code> or clone SoS locally and run <code>python setup.py install</code>. If the kernel is installed, fire Jupyter using command</p>

<pre><code>$ jupyter notebook</code></pre>
<p>from the <code>New</code> button to the top right corner, select <code>SoS</code>, and create a SoS notebook.</p>
<p>You can also start a qtconsole with the SoS kernel using command</p>

<pre><code>$ jupyter qtconsole --kernel sos</code></pre>
<p>or even <a href="../tutorials/Using_SoS_with_Spyder.html">use the SoS kernel in Spyder</a>. Most of the features described in this section also applies to <code>qtconsole</code> and <code>spyder</code>.</p>
<p>Note that SoS uses <a href="http://www.imagemagick.org/script/index.php">imagemagick</a> and python package <a href="http://docs.wand-py.org/en/0.4.2/"><code>wand</code></a> to preview output files so it is recommended that you install these packages.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="User-Interface-">User Interface <a id="User_Interface" /><a class="anchor-link" href="#User-Interface-">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="../media/JupyterNotebook.png" alt="user_interface"></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The SoS frontend is based on the Jupyter notebook frontend but adds a dropdown list and a button to the menu bar, a side panel, and dropdown lists for all code cell.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="cell-content-">cell content <a id="cell_content" /><a class="anchor-link" href="#cell-content-">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>A SoS Jupyter notebook accepts the following types of cells:</p>
<table>
<thead><tr>
<th>Cell type</th>
<th>Content</th>
<th>Interpreted by</th>
<th>Behavior</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Markdown</strong></td>
<td>Markdown text</td>
<td>Jupyter</td>
<td>can be evaluated to have title, table etc</td>
</tr>
<tr>
<td><strong>Subkernel</strong></td>
<td>Statements in other languages with optional SoS magics</td>
<td>Subkernels</td>
<td>SoS prepares statements and evaluate them in subkernels such as R.</td>
</tr>
<tr>
<td><strong>SoS</strong></td>
<td>SoS statements without section header</td>
<td>SoS</td>
<td>Evaluate the cell as a SoS step in a persistent SoS dictionary.</td>
</tr>
<tr>
<td><strong>Workflow</strong></td>
<td>SoS statements with section header</td>
<td>SoS</td>
<td>Can only be executed by magic <code>%run</code> (workflow in the current cell) or <code>%sosrun</code> (workflow in the entire notebook).</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The <strong>markdown cells</strong> contains Markdown text and are rendered by Jupyter. These cells are used for displaying rich-format texts such as title and table. Most of the content of this documentation is written in such cells.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The kernel of each <strong>code cell</strong> is marked by the language selector at the top-right corner of each code cell, and by the color of the prompt area of the cell. For example, the following cell is a code cell with kernel <code>R</code>.</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_R">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="n">paste</span><span class="p">(</span><span class="s1">&#39;This&#39;</span><span class="p">,</span> <span class="s1">&#39;is&#39;</span><span class="p">,</span> <span class="s1">&#39;cool&#39;</span><span class="p">,</span> <span class="s1">&#39;!&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
'This is cool !'
</div>

</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>A cell with a SoS kernel can be either a <strong>SoS cell</strong> or a <strong>Workflow cell</strong>, with the latter contains <strong>section headers</strong>. A scratch cell is executed immediately with a persistent SoS dictionary so that you can execute arbitrary SoS (Python) statements,</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="s1">&#39;This is a scratch cell&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>This is a scratch cell
</pre>
</div>
</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>or a single SoS step without header</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="kn">output:</span> <span class="s1">&#39;rand.txt&#39;</span>
<span class="kn">R:</span>
    <span class="n">cat</span><span class="p">(</span><span class="n">rnorm</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="nb">file</span><span class="o">=</span><span class="s1">&#39;rand.txt&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The last type of SoS cell contains formal definition of SoS steps. These cells define complete SoS workflows and can only be executed by SoS magics in Jupyter or by SoS commands from command line. These cells can only be executed with magics <code>%run</code> or <code>%sosrun</code>. For example, executing the following cell would not execute any statement.</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="p">[</span><span class="n">test_20</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;This is step {step_name} of a workflow&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>and you can execute the cell with a SoS magic <code>%run</code>.</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">run</span> <span class="n">wf</span>
<span class="p">[</span><span class="n">wf_20</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;This is step {step_name} of a workflow&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>This is step wf_20 of a workflow
</pre>
</div>
</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>What is even more magical about these cells is that they form <strong>notebook workflows</strong> that consist of all sections defined in the Jupyter notebook. A <code>%sosrun</code> magic would collect all workflow stepss in a notebook and execute them.</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">sosrun</span> <span class="n">wf</span>
<span class="p">[</span><span class="n">wf_30</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;This is step {step_name} of a workflow&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>This is step wf_20 of a workflow
This is step wf_30 of a workflow
</pre>
</div>
</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>SoS provides a rich environment for you to analyze data in different languages. Generally speaking, you can</p>
<ul>
<li>Use subkernels to analyze data interactively using different languages.</li>
<li>Use SoS cells to execute complete (and separate) scripts to analyze data or test steps of workflows, and</li>
<li>If needed, convert SoS cells to workflow cells to create complete workflows to analyze data in batch mode.</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Switch-between-kernels-">Switch between kernels <a id="Switch_between_kernels" /><a class="anchor-link" href="#Switch-between-kernels-">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>You can also enter any statement for any other (installed) kernel after you switch to the subkernel. The switch can be down either programmatically using magics <code>%with</code> or <code>%use</code>, or interactively using the language selection drop downs.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ol>
<li><p>A dropdown list at the top right corner of each cell displays the current kernel for the cell. You can change the kernel used for the cell by selecting another kernel from the list. This will start the cell with the specified kernel, although another kernel can still be used if the cell contains kernel switching magics <code>%use</code> or <code>%with</code>.</p>
</li>
<li><p>A dropbown list in the notebook toolbar lists the global default kernel that would be used for new cell. Changing the kernel from the tool bar effectively executes a <code>%use KERNEL</code> command. It will also change the kernel of any new cell to that kernel.</p>
</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Side-panel-">Side panel <a id="Side_panel" /><a class="anchor-link" href="#Side-panel-">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>SoS provides a side panel that can be toggled by a cube icon next to the language selection dropdown. The side panel contains a special cell that is used for two purposes:</p>
<ol>
<li>A scratch cell using which you can evaluate any expression and check its results. </li>
<li>A preview cell in which the <code>%preview</code> magic of any cell would be executed if the side panel is open.</li>
</ol>
<p>The input area of the panel cell has a dropdown button that allows you to execute a few frequently executed magics and previous executed statements.</p>
<p>Because this cell is not part of the main notebook, its output will not be saved with the notebook. This allows you to test commands, check environment, values of variables and content of files without affecting the content of the notebook.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Keyboard-Shortcuts-">Keyboard Shortcuts <a id="Keyboard_Shortcuts" /><a class="anchor-link" href="#Keyboard-Shortcuts-">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In addition to shortcuts defined by Jupyter (e.g. <code>Ctrl-Enter</code> to evaluate a cell and <code>Shift-Enter</code> to evaluate a cell and move next), the SoS kernel defines the following shortcuts</p>
<ol>
<li><code>Ctrl-Shift-Enter</code> This shortcut <strong>send selected text or current line if there is no selection to the panel cell for evaluation</strong>, using the kernel of the current cell. This effectively allows you to evaluate content of a cell line by line.</li>
<li><code>Ctrl-Shift-t</code> executes magic <code>%toc</code> that <strong>displays the table of content of the current notebook</strong> in the side panel, allowing you to easily navigate within a (long) notebook.</li>
<li><code>Ctrl-Shift-O</code> (output) <strong>toggles a code cell tag <code>show_output</code></strong> and mark the output with a gray bar to the right of the output area, or toggle a markdown cell tag <code>hide_output</code>. The tags will be rendered accordingly in HTML reports generated using sos templates.</li>
<li><code>Ctrl-Shift-v</code> (paste-table) If you have a table copied from external sources such as HTML page or excel file and if you are inside of a markdown cell, this shortcut <strong>pastes table as markdown code to the current cell</strong>. This allows easy copy of tables to SoS notebook.</li>
<li><code>Ctrl-Shift-m</code> (markdown) <strong>toggle a cell between markdown and code type</strong>, which can be easier to use than select code or markdown cell type from tool bar.</li>
<li><code>Ctrl-B</code> toggles side-panel. This is for compatibility with the toc2 extension of Jupyter notebook.</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Other-usage-hints-">Other usage hints <a id="Other_usage_hints" /><a class="anchor-link" href="#Other-usage-hints-">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ol>
<li><strong>Paste pictures from clipboard</strong>: You can paste image from clipboard directly to a markdown cell of the Jupyter notebook using <code>Ctrl-V</code> (or <code>Cmd-V</code> under Mac OS X). The key here is that you should select a markdown cell before pasting.</li>
<li><strong>Drag and drop figures</strong>: You can drag a picture and drop it to a markdown cell of the Jupyter notebook.</li>
<li><strong>Tab completion</strong>: You can use tab to complete keyword, magics (enter <code>%</code> and press <code>TAB</code> to get a list of magics), variable name, function name, file name etc.</li>
<li><strong>Inspect name</strong>: You can place your cursor inside a keyword, function name, magic etc, and press <code>CTRL-TAB</code> to inspect it. SoS will show variable name,, help message etc depending on the keyword that is being inspected.</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="How-to-get-help-">How to get help <a id="How_to_get_help" /><a class="anchor-link" href="#How-to-get-help-">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>It is recommended that you go through this document and understand how SoS Notebook works, but it is of course not possible for you to memorize all the magics, SoS actions and their options. To get help, you can</p>
<ol>
<li>For a complete reference, visit the <a href="https://vatlab.github.io/SoS/#documentation">documentation page of SoS</a>.</li>
<li>For a list of available magics, type <code>%</code> and <code>TAB</code> (completion).</li>
<li>For help on a particular magic, execute the magic with option <code>-h</code> (e.g. <code>%run -h</code>) in the side panel. Alternatively, you can place your cursor on <code>%run</code> and press <code>CTRL-TAB</code> to get a short description of magic.</li>
<li>For help on a SoS action (e.g. <code>python</code>), place your cursor on the action name (e.g. before <code>:</code> on <code>python:</code>), press <code>CTRL-TAB</code> to get the help message of the action.</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Preview-of-results-">Preview of results <a id="Preview_of_results" /><a class="anchor-link" href="#Preview-of-results-">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Instant preview of intermediate results is extrmely useful for interactive data analysis. SoS provides rich and extensible preview features to</p>
<ul>
<li>preview files in many different formats, </li>
<li>preview variables and expressions in SoS and subkernels,</li>
<li>show preview results temporarily in the side panel or permanently in the main notebook, and</li>
<li>generate interactive tables and plots for better presentation of data both in Jupyter notebook and in converted HTML reports.</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Magic-%preview--">Magic <code>%preview</code>  <a id="Magic_preview" /><a class="anchor-link" href="#Magic-%preview--">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>SoS provides a <code>%preview</code> magic to preview files and variables (and their expressions) after the completion of a cell. By default, <code>%preview</code> displays results in the side panel if the side panel is open, and otherwise in the main notebook. You can override this behavior with options <code>-p</code> (<code>--panel</code>) or <code>-n</code> (<code>--notebook</code>) to always display results in the side panel or notebook.</p>
<p>For example, in a subkernel R, you can do</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_R">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">preview</span> <span class="n">a</span><span class="o">.</span><span class="n">png</span>
<span class="o">%</span><span class="n">use</span> <span class="n">R</span>
<span class="n">png</span><span class="p">(</span><span class="s2">&quot;a.png&quot;</span><span class="p">)</span>
<span class="n">plot</span><span class="p">(</span><span class="n">seq</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">),</span> <span class="n">sin</span><span class="p">(</span><span class="n">seq</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)))</span>
<span class="n">dev</span><span class="o">.</span><span class="n">off</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<strong>pdf:</strong> 2
</div>

</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>to preview <code>a.png</code> generated by this cell. The figure will be displayed in the side panel if the side panel is open, or otherwise in the main notebook.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The <code>%preview</code> magic also accept sos variable and expressions. For example, the following example previes variable <code>mtcars</code> in a R kernel.</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_R">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[9]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">preview</span> <span class="o">-</span><span class="n">n</span> <span class="n">mtcars</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div class="sos_hint">> mtcars:</div>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<table>
<thead><tr><th></th><th scope=col>mpg</th><th scope=col>cyl</th><th scope=col>disp</th><th scope=col>hp</th><th scope=col>drat</th><th scope=col>wt</th><th scope=col>qsec</th><th scope=col>vs</th><th scope=col>am</th><th scope=col>gear</th><th scope=col>carb</th></tr></thead>
<tbody>
	<tr><th scope=row>Mazda RX4</th><td>21.0 </td><td>6    </td><td>160.0</td><td>110  </td><td>3.90 </td><td>2.620</td><td>16.46</td><td>0    </td><td>1    </td><td>4    </td><td>4    </td></tr>
	<tr><th scope=row>Mazda RX4 Wag</th><td>21.0 </td><td>6    </td><td>160.0</td><td>110  </td><td>3.90 </td><td>2.875</td><td>17.02</td><td>0    </td><td>1    </td><td>4    </td><td>4    </td></tr>
	<tr><th scope=row>Datsun 710</th><td>22.8 </td><td>4    </td><td>108.0</td><td> 93  </td><td>3.85 </td><td>2.320</td><td>18.61</td><td>1    </td><td>1    </td><td>4    </td><td>1    </td></tr>
	<tr><th scope=row>Hornet 4 Drive</th><td>21.4 </td><td>6    </td><td>258.0</td><td>110  </td><td>3.08 </td><td>3.215</td><td>19.44</td><td>1    </td><td>0    </td><td>3    </td><td>1    </td></tr>
	<tr><th scope=row>Hornet Sportabout</th><td>18.7 </td><td>8    </td><td>360.0</td><td>175  </td><td>3.15 </td><td>3.440</td><td>17.02</td><td>0    </td><td>0    </td><td>3    </td><td>2    </td></tr>
	<tr><th scope=row>Valiant</th><td>18.1 </td><td>6    </td><td>225.0</td><td>105  </td><td>2.76 </td><td>3.460</td><td>20.22</td><td>1    </td><td>0    </td><td>3    </td><td>1    </td></tr>
	<tr><th scope=row>Duster 360</th><td>14.3 </td><td>8    </td><td>360.0</td><td>245  </td><td>3.21 </td><td>3.570</td><td>15.84</td><td>0    </td><td>0    </td><td>3    </td><td>4    </td></tr>
	<tr><th scope=row>Merc 240D</th><td>24.4 </td><td>4    </td><td>146.7</td><td> 62  </td><td>3.69 </td><td>3.190</td><td>20.00</td><td>1    </td><td>0    </td><td>4    </td><td>2    </td></tr>
	<tr><th scope=row>Merc 230</th><td>22.8 </td><td>4    </td><td>140.8</td><td> 95  </td><td>3.92 </td><td>3.150</td><td>22.90</td><td>1    </td><td>0    </td><td>4    </td><td>2    </td></tr>
	<tr><th scope=row>Merc 280</th><td>19.2 </td><td>6    </td><td>167.6</td><td>123  </td><td>3.92 </td><td>3.440</td><td>18.30</td><td>1    </td><td>0    </td><td>4    </td><td>4    </td></tr>
	<tr><th scope=row>Merc 280C</th><td>17.8 </td><td>6    </td><td>167.6</td><td>123  </td><td>3.92 </td><td>3.440</td><td>18.90</td><td>1    </td><td>0    </td><td>4    </td><td>4    </td></tr>
	<tr><th scope=row>Merc 450SE</th><td>16.4 </td><td>8    </td><td>275.8</td><td>180  </td><td>3.07 </td><td>4.070</td><td>17.40</td><td>0    </td><td>0    </td><td>3    </td><td>3    </td></tr>
	<tr><th scope=row>Merc 450SL</th><td>17.3 </td><td>8    </td><td>275.8</td><td>180  </td><td>3.07 </td><td>3.730</td><td>17.60</td><td>0    </td><td>0    </td><td>3    </td><td>3    </td></tr>
	<tr><th scope=row>Merc 450SLC</th><td>15.2 </td><td>8    </td><td>275.8</td><td>180  </td><td>3.07 </td><td>3.780</td><td>18.00</td><td>0    </td><td>0    </td><td>3    </td><td>3    </td></tr>
	<tr><th scope=row>Cadillac Fleetwood</th><td>10.4 </td><td>8    </td><td>472.0</td><td>205  </td><td>2.93 </td><td>5.250</td><td>17.98</td><td>0    </td><td>0    </td><td>3    </td><td>4    </td></tr>
	<tr><th scope=row>Lincoln Continental</th><td>10.4 </td><td>8    </td><td>460.0</td><td>215  </td><td>3.00 </td><td>5.424</td><td>17.82</td><td>0    </td><td>0    </td><td>3    </td><td>4    </td></tr>
	<tr><th scope=row>Chrysler Imperial</th><td>14.7 </td><td>8    </td><td>440.0</td><td>230  </td><td>3.23 </td><td>5.345</td><td>17.42</td><td>0    </td><td>0    </td><td>3    </td><td>4    </td></tr>
	<tr><th scope=row>Fiat 128</th><td>32.4 </td><td>4    </td><td> 78.7</td><td> 66  </td><td>4.08 </td><td>2.200</td><td>19.47</td><td>1    </td><td>1    </td><td>4    </td><td>1    </td></tr>
	<tr><th scope=row>Honda Civic</th><td>30.4 </td><td>4    </td><td> 75.7</td><td> 52  </td><td>4.93 </td><td>1.615</td><td>18.52</td><td>1    </td><td>1    </td><td>4    </td><td>2    </td></tr>
	<tr><th scope=row>Toyota Corolla</th><td>33.9 </td><td>4    </td><td> 71.1</td><td> 65  </td><td>4.22 </td><td>1.835</td><td>19.90</td><td>1    </td><td>1    </td><td>4    </td><td>1    </td></tr>
	<tr><th scope=row>Toyota Corona</th><td>21.5 </td><td>4    </td><td>120.1</td><td> 97  </td><td>3.70 </td><td>2.465</td><td>20.01</td><td>1    </td><td>0    </td><td>3    </td><td>1    </td></tr>
	<tr><th scope=row>Dodge Challenger</th><td>15.5 </td><td>8    </td><td>318.0</td><td>150  </td><td>2.76 </td><td>3.520</td><td>16.87</td><td>0    </td><td>0    </td><td>3    </td><td>2    </td></tr>
	<tr><th scope=row>AMC Javelin</th><td>15.2 </td><td>8    </td><td>304.0</td><td>150  </td><td>3.15 </td><td>3.435</td><td>17.30</td><td>0    </td><td>0    </td><td>3    </td><td>2    </td></tr>
	<tr><th scope=row>Camaro Z28</th><td>13.3 </td><td>8    </td><td>350.0</td><td>245  </td><td>3.73 </td><td>3.840</td><td>15.41</td><td>0    </td><td>0    </td><td>3    </td><td>4    </td></tr>
	<tr><th scope=row>Pontiac Firebird</th><td>19.2 </td><td>8    </td><td>400.0</td><td>175  </td><td>3.08 </td><td>3.845</td><td>17.05</td><td>0    </td><td>0    </td><td>3    </td><td>2    </td></tr>
	<tr><th scope=row>Fiat X1-9</th><td>27.3 </td><td>4    </td><td> 79.0</td><td> 66  </td><td>4.08 </td><td>1.935</td><td>18.90</td><td>1    </td><td>1    </td><td>4    </td><td>1    </td></tr>
	<tr><th scope=row>Porsche 914-2</th><td>26.0 </td><td>4    </td><td>120.3</td><td> 91  </td><td>4.43 </td><td>2.140</td><td>16.70</td><td>0    </td><td>1    </td><td>5    </td><td>2    </td></tr>
	<tr><th scope=row>Lotus Europa</th><td>30.4 </td><td>4    </td><td> 95.1</td><td>113  </td><td>3.77 </td><td>1.513</td><td>16.90</td><td>1    </td><td>1    </td><td>5    </td><td>2    </td></tr>
	<tr><th scope=row>Ford Pantera L</th><td>15.8 </td><td>8    </td><td>351.0</td><td>264  </td><td>4.22 </td><td>3.170</td><td>14.50</td><td>0    </td><td>1    </td><td>5    </td><td>4    </td></tr>
	<tr><th scope=row>Ferrari Dino</th><td>19.7 </td><td>6    </td><td>145.0</td><td>175  </td><td>3.62 </td><td>2.770</td><td>15.50</td><td>0    </td><td>1    </td><td>5    </td><td>6    </td></tr>
	<tr><th scope=row>Maserati Bora</th><td>15.0 </td><td>8    </td><td>301.0</td><td>335  </td><td>3.54 </td><td>3.570</td><td>14.60</td><td>0    </td><td>1    </td><td>5    </td><td>8    </td></tr>
	<tr><th scope=row>Volvo 142E</th><td>21.4 </td><td>4    </td><td>121.0</td><td>109  </td><td>4.11 </td><td>2.780</td><td>18.60</td><td>1    </td><td>1    </td><td>4    </td><td>2    </td></tr>
</tbody>
</table>

</div>

</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>You can also specify expressions to be reviewed, but similar to command line arguments, you will need to quote the expression if it contains spaces. For example,</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_R">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[10]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">preview</span> <span class="o">-</span><span class="n">n</span> <span class="n">rownames</span><span class="p">(</span><span class="n">mtcars</span><span class="p">)</span> <span class="n">mtcars</span><span class="p">[</span><span class="s1">&#39;gear&#39;</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div class="sos_hint">> rownames(mtcars):</div>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<ol class=list-inline>
	<li>'Mazda RX4'</li>
	<li>'Mazda RX4 Wag'</li>
	<li>'Datsun 710'</li>
	<li>'Hornet 4 Drive'</li>
	<li>'Hornet Sportabout'</li>
	<li>'Valiant'</li>
	<li>'Duster 360'</li>
	<li>'Merc 240D'</li>
	<li>'Merc 230'</li>
	<li>'Merc 280'</li>
	<li>'Merc 280C'</li>
	<li>'Merc 450SE'</li>
	<li>'Merc 450SL'</li>
	<li>'Merc 450SLC'</li>
	<li>'Cadillac Fleetwood'</li>
	<li>'Lincoln Continental'</li>
	<li>'Chrysler Imperial'</li>
	<li>'Fiat 128'</li>
	<li>'Honda Civic'</li>
	<li>'Toyota Corolla'</li>
	<li>'Toyota Corona'</li>
	<li>'Dodge Challenger'</li>
	<li>'AMC Javelin'</li>
	<li>'Camaro Z28'</li>
	<li>'Pontiac Firebird'</li>
	<li>'Fiat X1-9'</li>
	<li>'Porsche 914-2'</li>
	<li>'Lotus Europa'</li>
	<li>'Ford Pantera L'</li>
	<li>'Ferrari Dino'</li>
	<li>'Maserati Bora'</li>
	<li>'Volvo 142E'</li>
</ol>

</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div class="sos_hint">> mtcars['gear']:</div>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<table>
<thead><tr><th></th><th scope=col>gear</th></tr></thead>
<tbody>
	<tr><th scope=row>Mazda RX4</th><td>4</td></tr>
	<tr><th scope=row>Mazda RX4 Wag</th><td>4</td></tr>
	<tr><th scope=row>Datsun 710</th><td>4</td></tr>
	<tr><th scope=row>Hornet 4 Drive</th><td>3</td></tr>
	<tr><th scope=row>Hornet Sportabout</th><td>3</td></tr>
	<tr><th scope=row>Valiant</th><td>3</td></tr>
	<tr><th scope=row>Duster 360</th><td>3</td></tr>
	<tr><th scope=row>Merc 240D</th><td>4</td></tr>
	<tr><th scope=row>Merc 230</th><td>4</td></tr>
	<tr><th scope=row>Merc 280</th><td>4</td></tr>
	<tr><th scope=row>Merc 280C</th><td>4</td></tr>
	<tr><th scope=row>Merc 450SE</th><td>3</td></tr>
	<tr><th scope=row>Merc 450SL</th><td>3</td></tr>
	<tr><th scope=row>Merc 450SLC</th><td>3</td></tr>
	<tr><th scope=row>Cadillac Fleetwood</th><td>3</td></tr>
	<tr><th scope=row>Lincoln Continental</th><td>3</td></tr>
	<tr><th scope=row>Chrysler Imperial</th><td>3</td></tr>
	<tr><th scope=row>Fiat 128</th><td>4</td></tr>
	<tr><th scope=row>Honda Civic</th><td>4</td></tr>
	<tr><th scope=row>Toyota Corolla</th><td>4</td></tr>
	<tr><th scope=row>Toyota Corona</th><td>3</td></tr>
	<tr><th scope=row>Dodge Challenger</th><td>3</td></tr>
	<tr><th scope=row>AMC Javelin</th><td>3</td></tr>
	<tr><th scope=row>Camaro Z28</th><td>3</td></tr>
	<tr><th scope=row>Pontiac Firebird</th><td>3</td></tr>
	<tr><th scope=row>Fiat X1-9</th><td>4</td></tr>
	<tr><th scope=row>Porsche 914-2</th><td>5</td></tr>
	<tr><th scope=row>Lotus Europa</th><td>5</td></tr>
	<tr><th scope=row>Ford Pantera L</th><td>5</td></tr>
	<tr><th scope=row>Ferrari Dino</th><td>5</td></tr>
	<tr><th scope=row>Maserati Bora</th><td>5</td></tr>
	<tr><th scope=row>Volvo 142E</th><td>4</td></tr>
</tbody>
</table>

</div>

</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>If option <code>-w</code> (<code>--workflow</code>) is specified, sos collects workflow steps from the current notebook and preview it. This would give you a better sense of what would be saved with magic <code>%sossave</code> or executed with magic <code>%sosrun</code>.</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[11]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">preview</span> <span class="o">--</span><span class="n">workflow</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<textarea id="preview_wf_513001">#!/usr/bin/env sos-runner
#fileformat=SOS1.0

[test_20]
print(f"This is step {step_name} of a workflow")

[wf_20]
print(f"This is step {step_name} of a workflow")

[wf_30]
print(f"This is step {step_name} of a workflow")

[example_step]
print(f"This is {step_name}")

[example_step_1]
print(f"This is {step_name}")

[example_step_10]
print(f"This is {step_name}")

[example_step_20]
print(f"This is {step_name}")

[example_step_15]
print(f"This is {step_name} with option {var}")

[example_step_25]
print(f"This is {step_name}")

[global]
var = 'this is global'

[stepA]
parameter: var = 20
print(f"{step_name} with parameter {var}")

[master]
sos_run('stepA', var=30)

</textarea>
</div>

</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Magic <code>%preview</code> also accepts an option <code>--off</code>, in which case it turns off the preview of output files from the SoS workflow.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Preview-variables-from-another-kernel-">Preview variables from another kernel <a id="Preview_variables_from_another_kernel" /><a class="anchor-link" href="#Preview-variables-from-another-kernel-">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The <code>%preview</code> magic previews the variables with the kernel using which the cell is evaluated. For example, even if you have <code>var</code> defined in both SoS and <code>R</code> kernel,</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[12]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="n">val</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span>
</pre></div>

</div>
</div>
</div>

</div>
	</div><div class="cell border-box-sizing code_cell rendered lan_R">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[13]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="n">val</span> <span class="o">=</span> <span class="n">rep</span><span class="p">(</span><span class="n">c</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
	</div><div class="cell border-box-sizing code_cell rendered lan_R">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[14]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">preview</span> <span class="o">-</span><span class="n">n</span> <span class="n">val</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div class="sos_hint">> val:</div>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<ol class=list-inline>
	<li>1</li>
	<li>2</li>
	<li>1</li>
	<li>2</li>
	<li>1</li>
	<li>2</li>
</ol>

</div>

</div>

</div>
</div>

</div>
	</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[15]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">preview</span> <span class="o">-</span><span class="n">n</span> <span class="n">val</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div class="sos_hint">> val: list of length 4</div>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>




<div class="output_text output_subarea ">
<pre>[2, 3, 2, 3]</pre>
</div>

</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Note that SoS also displays type information of variables in the SoS kernel, including row and columns for data frames, but not in subkernels.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>If you would like to preview variable in another kernel, you can specify it using option <code>--kernel</code>, for example, the following cell previews a variable <code>r.val</code> in a SoS kernel.</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[16]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">preview</span> <span class="o">-</span><span class="n">n</span> <span class="n">val</span> <span class="o">--</span><span class="n">kernel</span> <span class="n">R</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div class="sos_hint">> val:</div>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<ol class=list-inline>
	<li>1</li>
	<li>2</li>
	<li>1</li>
	<li>2</li>
	<li>1</li>
	<li>2</li>
</ol>

</div>

</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Preview-of-files-">Preview of files <a id="Preview_of_files" /><a class="anchor-link" href="#Preview-of-files-">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The <code>%preview</code> magic can be used to preview files in a variety of formats. For example, the following cell download a bam file and use <code>%preview</code> magic to preview the content of the file to make sure the file has been downloaded correctly.</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[17]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">preview</span> <span class="o">-</span><span class="n">n</span> <span class="n">issue225</span><span class="o">.</span><span class="n">bam</span>
<span class="kn">download:</span>
  <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">lomereiter</span><span class="o">/</span><span class="n">sambamba</span><span class="o">/</span><span class="n">raw</span><span class="o">/</span><span class="n">master</span><span class="o">/</span><span class="n">test</span><span class="o">/</span><span class="n">issue225</span><span class="o">.</span><span class="n">bam</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stderr output_text">
<pre>issue225.bam
issue225.bam:   0%|          | 0/4261 [00:00&lt;?, ?it/s]
                                                                                                                                                  </pre>
</div>
</div>

<div class="output_area">

<div class="prompt output_prompt">Out[17]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>0</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div class="sos_hint">> issue225.bam (4.2 KiB):</div>
</div>

</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Similarly, you can preview files produced by another kernel</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_R">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[18]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">preview</span> <span class="n">test</span><span class="o">.</span><span class="n">pdf</span> <span class="o">-</span><span class="n">n</span> <span class="o">-</span><span class="n">s</span> <span class="n">png</span>
<span class="o">%</span><span class="n">use</span> <span class="n">R</span>
<span class="n">pdf</span><span class="p">(</span><span class="s1">&#39;test.pdf&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
<span class="n">attach</span><span class="p">(</span><span class="n">mtcars</span><span class="p">)</span>
<span class="n">plot</span><span class="p">(</span><span class="n">wt</span><span class="p">,</span> <span class="n">mpg</span><span class="p">,</span> <span class="n">main</span><span class="o">=</span><span class="s2">&quot;Scatterplot Example&quot;</span><span class="p">,</span> 
  <span class="n">xlab</span><span class="o">=</span><span class="s2">&quot;Car Weight &quot;</span><span class="p">,</span> <span class="n">ylab</span><span class="o">=</span><span class="s2">&quot;Miles Per Gallon &quot;</span><span class="p">,</span> <span class="n">pch</span><span class="o">=</span><span class="mi">19</span><span class="p">)</span>
<span class="n">dev</span><span class="o">.</span><span class="n">off</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<strong>pdf:</strong> 2
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div class="sos_hint">> test.pdf (4.8 KiB):</div>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stderr output_text">
<pre>MagickWand shared library not found.
You probably had not installed ImageMagick library.
Try to install:
  brew install freetype imagemagick
</pre>
</div>
</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<iframe src=test.pdf width="100%"></iframe>
</div>

</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Note that SoS by default preview PDF files as an embeded object (iframe), but you can use option <code>-s png</code> to convert PDF to png to preview it as a image, if you have imagematick and Python package <code>wand</code> installed.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Preview-options-">Preview options <a id="Preview_options" /><a class="anchor-link" href="#Preview-options-">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The <code>%magic</code> accepts options that are format dependent. This table lists options that are available to specific file types. Options for previewing dataframes will be described later.</p>
<table>
<thead><tr>
<th>file type</th>
<th>Option</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>pdf</td>
<td><code>--style png</code> (<code>-s png</code>)</td>
<td>Convert PDF to png before preview. All pages are combined to produce a sngle PNG figure if the pdf file contains multiple pages. This option requires Python module <code>wand</code>.</td>
</tr>
<tr>
<td></td>
<td><code>--pages 2 3</code></td>
<td>With <code>--style png</code>, preview specified pages (page numbers starting from 1) from a multi-page PDF file.</td>
</tr>
<tr>
<td>txt</td>
<td><code>--limit lines</code> (<code>-l</code>)</td>
<td>Preview number of lines to preview for text files (not limited to files with extension <code>.txt</code>), default to <code>5</code></td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Automatic-preview-">Automatic preview <a id="Automatic_preview" /><a class="anchor-link" href="#Automatic-preview-">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>SoS will automatically preview results of Python assignments when you send statements to the sidepanel for execution. For example, if you do execute the following cell with <code>Ctrl-Shift-Enter</code>,</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[19]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="n">s</span><span class="o">=</span><span class="s1">&#39;12345&#39;</span>
</pre></div>

</div>
</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The cell would be executed in the side panel as</p>

<pre><code>%preview s
s='12345'</code></pre>
<p>which allows instant feedback when you step through your code.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>SoS would also automatic preview results from SoS workflows that are specified with statement <code>output:</code>. For example, the following SoS cell executes a scratch step (step without section head) and generates output <code>a.png</code>. The figure would be automatically displayed in the side panel after the step is executed.</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[20]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="kn">output:</span> <span class="s1">&#39;a.png&#39;</span>
<span class="kn">R:</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span>
<span class="n">png</span><span class="p">(</span><span class="s2">&quot;{_output}&quot;</span><span class="p">)</span>
<span class="n">plot</span><span class="p">(</span><span class="n">seq</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">),</span> <span class="n">sin</span><span class="p">(</span><span class="n">seq</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)))</span>
<span class="n">dev</span><span class="o">.</span><span class="n">off</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stderr output_text">
<pre>INFO: <span class="ansi-green-fg">scratch_0</span> (index=0) is <span class="ansi-green-fg">ignored</span> due to saved signature
</pre>
</div>
</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Preview-of-remote-files-">Preview of remote files <a id="Preview_of_remote_files" /><a class="anchor-link" href="#Preview-of-remote-files-">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>When a workflow or a task is executed remotely (see <a href="Remote_Execution.html">Remote Execution</a> for details, result files might be on a remote host that is unavailable for local preview. In this case, you can specify the host with option <code>-r HOST</code> and preview files remotely. This essentially executes a command <code>sos preview -r HOST FILE</code> on the remote host and allows you to preview content of (large) files without copying them locally.</p>
<p>For example, you can execute a workflow on a remote host <code>dev</code> to generate a file (<code>mygraphic.png</code>) and use <code>%preview -r dev</code> to preview it.</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">run</span> <span class="o">-</span><span class="n">r</span> <span class="n">dev</span>
<span class="o">%</span><span class="n">preview</span> <span class="o">-</span><span class="n">n</span> <span class="n">test</span><span class="o">.</span><span class="n">png</span> <span class="o">-</span><span class="n">r</span> <span class="n">dev</span>
<span class="kn">R:</span>
  <span class="n">png</span><span class="p">(</span><span class="nb">file</span><span class="o">=</span><span class="s2">&quot;mygraphic.png&quot;</span><span class="p">,</span><span class="n">width</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span><span class="n">height</span><span class="o">=</span><span class="mi">350</span><span class="p">)</span>
  <span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">rnorm</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span><span class="n">y</span><span class="o">=</span><span class="n">rnorm</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span><span class="n">main</span><span class="o">=</span><span class="s2">&quot;example&quot;</span><span class="p">)</span>
  <span class="n">dev</span><span class="o">.</span><span class="n">off</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Preview-of-tables-">Preview of tables <a id="Preview_of_tables" /><a class="anchor-link" href="#Preview-of-tables-">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>If a data to be previewed is a Pandas DataFrame (or a csv or excel file which would be previewed as a DataFrame), SoS will preview it as a sortable and searchable table. For example, the following cell get a data.frame <code>mtcar</code> from the R kernel (as a pandas DataFrame) and preview it in the main notebook:</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[22]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">get</span> <span class="n">mtcars</span> <span class="o">--</span><span class="kn">from</span> <span class="nn">R</span>
<span class="o">%</span><span class="n">preview</span> <span class="o">-</span><span class="n">n</span> <span class="n">mtcars</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stderr output_text">
<pre>Loading required package: feather
</pre>
</div>
</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div class="sos_hint">> mtcars: DataFrame of shape (32, 11)</div>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">

    <div class='dataframe_container' style="max-height:400px">
    <input type="text" class='dataframe_input' id="search_1" onkeyup="filterDataFrame('1')" placeholder="Search for names..">
    <table border="1" id="dataframe_1" class="sos_dataframe dataframe">
  <thead>
    <tr style="text-align: right;">
      <th> &nbsp; <i class="fa fa-sort" style="color:lightgray" onclick="sortDataFrame('1', 0, 'alphabetic')"></th>
      <th>mpg &nbsp; <i class="fa fa-sort" style="color:lightgray" onclick="sortDataFrame('1', 1, 'numeric')"></th>
      <th>cyl &nbsp; <i class="fa fa-sort" style="color:lightgray" onclick="sortDataFrame('1', 2, 'numeric')"></th>
      <th>disp &nbsp; <i class="fa fa-sort" style="color:lightgray" onclick="sortDataFrame('1', 3, 'numeric')"></th>
      <th>hp &nbsp; <i class="fa fa-sort" style="color:lightgray" onclick="sortDataFrame('1', 4, 'numeric')"></th>
      <th>drat &nbsp; <i class="fa fa-sort" style="color:lightgray" onclick="sortDataFrame('1', 5, 'numeric')"></th>
      <th>wt &nbsp; <i class="fa fa-sort" style="color:lightgray" onclick="sortDataFrame('1', 6, 'numeric')"></th>
      <th>qsec &nbsp; <i class="fa fa-sort" style="color:lightgray" onclick="sortDataFrame('1', 7, 'numeric')"></th>
      <th>vs &nbsp; <i class="fa fa-sort" style="color:lightgray" onclick="sortDataFrame('1', 8, 'numeric')"></th>
      <th>am &nbsp; <i class="fa fa-sort" style="color:lightgray" onclick="sortDataFrame('1', 9, 'numeric')"></th>
      <th>gear &nbsp; <i class="fa fa-sort" style="color:lightgray" onclick="sortDataFrame('1', 10, 'numeric')"></th>
      <th>carb &nbsp; <i class="fa fa-sort" style="color:lightgray" onclick="sortDataFrame('1', 11, 'numeric')"></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Mazda RX4</th>
      <td>21.0</td>
      <td>6.0</td>
      <td>160.0</td>
      <td>110.0</td>
      <td>3.90</td>
      <td>2.620</td>
      <td>16.46</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>4.0</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>Mazda RX4 Wag</th>
      <td>21.0</td>
      <td>6.0</td>
      <td>160.0</td>
      <td>110.0</td>
      <td>3.90</td>
      <td>2.875</td>
      <td>17.02</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>4.0</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>Datsun 710</th>
      <td>22.8</td>
      <td>4.0</td>
      <td>108.0</td>
      <td>93.0</td>
      <td>3.85</td>
      <td>2.320</td>
      <td>18.61</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>4.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>Hornet 4 Drive</th>
      <td>21.4</td>
      <td>6.0</td>
      <td>258.0</td>
      <td>110.0</td>
      <td>3.08</td>
      <td>3.215</td>
      <td>19.44</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>3.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>Hornet Sportabout</th>
      <td>18.7</td>
      <td>8.0</td>
      <td>360.0</td>
      <td>175.0</td>
      <td>3.15</td>
      <td>3.440</td>
      <td>17.02</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>3.0</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>Valiant</th>
      <td>18.1</td>
      <td>6.0</td>
      <td>225.0</td>
      <td>105.0</td>
      <td>2.76</td>
      <td>3.460</td>
      <td>20.22</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>3.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>Duster 360</th>
      <td>14.3</td>
      <td>8.0</td>
      <td>360.0</td>
      <td>245.0</td>
      <td>3.21</td>
      <td>3.570</td>
      <td>15.84</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>3.0</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>Merc 240D</th>
      <td>24.4</td>
      <td>4.0</td>
      <td>146.7</td>
      <td>62.0</td>
      <td>3.69</td>
      <td>3.190</td>
      <td>20.00</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>4.0</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>Merc 230</th>
      <td>22.8</td>
      <td>4.0</td>
      <td>140.8</td>
      <td>95.0</td>
      <td>3.92</td>
      <td>3.150</td>
      <td>22.90</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>4.0</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>Merc 280</th>
      <td>19.2</td>
      <td>6.0</td>
      <td>167.6</td>
      <td>123.0</td>
      <td>3.92</td>
      <td>3.440</td>
      <td>18.30</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>4.0</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>Merc 280C</th>
      <td>17.8</td>
      <td>6.0</td>
      <td>167.6</td>
      <td>123.0</td>
      <td>3.92</td>
      <td>3.440</td>
      <td>18.90</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>4.0</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>Merc 450SE</th>
      <td>16.4</td>
      <td>8.0</td>
      <td>275.8</td>
      <td>180.0</td>
      <td>3.07</td>
      <td>4.070</td>
      <td>17.40</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>3.0</td>
      <td>3.0</td>
    </tr>
    <tr>
      <th>Merc 450SL</th>
      <td>17.3</td>
      <td>8.0</td>
      <td>275.8</td>
      <td>180.0</td>
      <td>3.07</td>
      <td>3.730</td>
      <td>17.60</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>3.0</td>
      <td>3.0</td>
    </tr>
    <tr>
      <th>Merc 450SLC</th>
      <td>15.2</td>
      <td>8.0</td>
      <td>275.8</td>
      <td>180.0</td>
      <td>3.07</td>
      <td>3.780</td>
      <td>18.00</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>3.0</td>
      <td>3.0</td>
    </tr>
    <tr>
      <th>Cadillac Fleetwood</th>
      <td>10.4</td>
      <td>8.0</td>
      <td>472.0</td>
      <td>205.0</td>
      <td>2.93</td>
      <td>5.250</td>
      <td>17.98</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>3.0</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>Lincoln Continental</th>
      <td>10.4</td>
      <td>8.0</td>
      <td>460.0</td>
      <td>215.0</td>
      <td>3.00</td>
      <td>5.424</td>
      <td>17.82</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>3.0</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>Chrysler Imperial</th>
      <td>14.7</td>
      <td>8.0</td>
      <td>440.0</td>
      <td>230.0</td>
      <td>3.23</td>
      <td>5.345</td>
      <td>17.42</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>3.0</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>Fiat 128</th>
      <td>32.4</td>
      <td>4.0</td>
      <td>78.7</td>
      <td>66.0</td>
      <td>4.08</td>
      <td>2.200</td>
      <td>19.47</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>4.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>Honda Civic</th>
      <td>30.4</td>
      <td>4.0</td>
      <td>75.7</td>
      <td>52.0</td>
      <td>4.93</td>
      <td>1.615</td>
      <td>18.52</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>4.0</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>Toyota Corolla</th>
      <td>33.9</td>
      <td>4.0</td>
      <td>71.1</td>
      <td>65.0</td>
      <td>4.22</td>
      <td>1.835</td>
      <td>19.90</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>4.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>Toyota Corona</th>
      <td>21.5</td>
      <td>4.0</td>
      <td>120.1</td>
      <td>97.0</td>
      <td>3.70</td>
      <td>2.465</td>
      <td>20.01</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>3.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>Dodge Challenger</th>
      <td>15.5</td>
      <td>8.0</td>
      <td>318.0</td>
      <td>150.0</td>
      <td>2.76</td>
      <td>3.520</td>
      <td>16.87</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>3.0</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>AMC Javelin</th>
      <td>15.2</td>
      <td>8.0</td>
      <td>304.0</td>
      <td>150.0</td>
      <td>3.15</td>
      <td>3.435</td>
      <td>17.30</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>3.0</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>Camaro Z28</th>
      <td>13.3</td>
      <td>8.0</td>
      <td>350.0</td>
      <td>245.0</td>
      <td>3.73</td>
      <td>3.840</td>
      <td>15.41</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>3.0</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>Pontiac Firebird</th>
      <td>19.2</td>
      <td>8.0</td>
      <td>400.0</td>
      <td>175.0</td>
      <td>3.08</td>
      <td>3.845</td>
      <td>17.05</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>3.0</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>Fiat X1-9</th>
      <td>27.3</td>
      <td>4.0</td>
      <td>79.0</td>
      <td>66.0</td>
      <td>4.08</td>
      <td>1.935</td>
      <td>18.90</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>4.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>Porsche 914-2</th>
      <td>26.0</td>
      <td>4.0</td>
      <td>120.3</td>
      <td>91.0</td>
      <td>4.43</td>
      <td>2.140</td>
      <td>16.70</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>5.0</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>Lotus Europa</th>
      <td>30.4</td>
      <td>4.0</td>
      <td>95.1</td>
      <td>113.0</td>
      <td>3.77</td>
      <td>1.513</td>
      <td>16.90</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>5.0</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>Ford Pantera L</th>
      <td>15.8</td>
      <td>8.0</td>
      <td>351.0</td>
      <td>264.0</td>
      <td>4.22</td>
      <td>3.170</td>
      <td>14.50</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>5.0</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>Ferrari Dino</th>
      <td>19.7</td>
      <td>6.0</td>
      <td>145.0</td>
      <td>175.0</td>
      <td>3.62</td>
      <td>2.770</td>
      <td>15.50</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>5.0</td>
      <td>6.0</td>
    </tr>
    <tr>
      <th>Maserati Bora</th>
      <td>15.0</td>
      <td>8.0</td>
      <td>301.0</td>
      <td>335.0</td>
      <td>3.54</td>
      <td>3.570</td>
      <td>14.60</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>5.0</td>
      <td>8.0</td>
    </tr>
    <tr>
      <th>Volvo 142E</th>
      <td>21.4</td>
      <td>4.0</td>
      <td>121.0</td>
      <td>109.0</td>
      <td>4.11</td>
      <td>2.780</td>
      <td>18.60</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>4.0</td>
      <td>2.0</td>
    </tr>
  </tbody>
</table></div>
</div>

</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Compared to previewing the same variable in R, you have the addition features of</p>
<ol>
<li>sorting table by clicking the sort icon at the header of each column</li>
<li>displaying a subset of rows that matches specified text in the input text</li>
</ol>
<p>Note that SoS by default outputs the first 200 rows of the table. You can use option <code>-l</code> (<code>--limit</code>) to change this threshold.</p>
<p>What makes this feature particularly interesting is that the table will be sortable and searchable when you save the jupyter notebook in HTML format (through command <code>sos convert analysis.ipynb analysis.html --template sos-report</code> or magic <code>%sossave --to html</code>).</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Scatter-Plot-">Scatter Plot <a id="Scatter_Plot" /><a class="anchor-link" href="#Scatter-Plot-">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The tablular preview of Pandas DataFrame is actually using the default <code>table</code> style of <code>%preview</code>. If you have one or more numeric columns, you can use the <code>scatterplot</code> style of <code>%preview</code> to view the data. For example, the following command plots <code>mpg</code> vs <code>disp</code> of the <code>mtcars</code> dataset, stratified by <code>cyl</code>.</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[23]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">preview</span> <span class="n">mtcars</span> <span class="o">-</span><span class="n">n</span> <span class="o">-</span><span class="n">s</span> <span class="n">scatterplot</span> <span class="n">mpg</span> <span class="n">disp</span> <span class="o">--</span><span class="n">by</span> <span class="n">cyl</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div class="sos_hint">> mtcars: DataFrame of shape (32, 11)</div>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">

<div class='scatterplot_container'>
<div class='scatterplot' id='dataframe_scatterplot_1' width='50vw' height='38vw'></div>
<script language="javascript" type="text/javascript" src="http://www.flotcharts.org/flot/jquery.flot.js"></script>
<script>
    var options = {"xaxis": {}, "yaxis": {}, "series": {"lines": {"show": false}, "points": {"show": true}}, "grid": {"hoverable": true, "clickable": true}};
    function plotScatterPlot1() {
        plot = $.plot('#dataframe_scatterplot_1', [{"label": "disp (cyl=4.0)", "data": [[22.8, 108.0, "index: Datsun&nbsp;710<br>mpg: 22.8"], [24.4, 146.7, "index: Merc&nbsp;240D<br>mpg: 24.4"], [22.8, 140.8, "index: Merc&nbsp;230<br>mpg: 22.8"], [32.4, 78.7, "index: Fiat&nbsp;128<br>mpg: 32.4"], [30.4, 75.7, "index: Honda&nbsp;Civic<br>mpg: 30.4"], [33.9, 71.1, "index: Toyota&nbsp;Corolla<br>mpg: 33.9"], [21.5, 120.1, "index: Toyota&nbsp;Corona<br>mpg: 21.5"], [27.3, 79.0, "index: Fiat&nbsp;X1&#8209;9<br>mpg: 27.3"], [26.0, 120.3, "index: Porsche&nbsp;914&#8209;2<br>mpg: 26.0"], [30.4, 95.1, "index: Lotus&nbsp;Europa<br>mpg: 30.4"], [21.4, 121.0, "index: Volvo&nbsp;142E<br>mpg: 21.4"]]}, {"label": "disp (cyl=6.0)", "data": [[21.0, 160.0, "index: Mazda&nbsp;RX4<br>mpg: 21.0"], [21.0, 160.0, "index: Mazda&nbsp;RX4&nbsp;Wag<br>mpg: 21.0"], [21.4, 258.0, "index: Hornet&nbsp;4&nbsp;Drive<br>mpg: 21.4"], [18.1, 225.0, "index: Valiant<br>mpg: 18.1"], [19.2, 167.6, "index: Merc&nbsp;280<br>mpg: 19.2"], [17.8, 167.6, "index: Merc&nbsp;280C<br>mpg: 17.8"], [19.7, 145.0, "index: Ferrari&nbsp;Dino<br>mpg: 19.7"]]}, {"label": "disp (cyl=8.0)", "data": [[18.7, 360.0, "index: Hornet&nbsp;Sportabout<br>mpg: 18.7"], [14.3, 360.0, "index: Duster&nbsp;360<br>mpg: 14.3"], [16.4, 275.8, "index: Merc&nbsp;450SE<br>mpg: 16.4"], [17.3, 275.8, "index: Merc&nbsp;450SL<br>mpg: 17.3"], [15.2, 275.8, "index: Merc&nbsp;450SLC<br>mpg: 15.2"], [10.4, 472.0, "index: Cadillac&nbsp;Fleetwood<br>mpg: 10.4"], [10.4, 460.0, "index: Lincoln&nbsp;Continental<br>mpg: 10.4"], [14.7, 440.0, "index: Chrysler&nbsp;Imperial<br>mpg: 14.7"], [15.5, 318.0, "index: Dodge&nbsp;Challenger<br>mpg: 15.5"], [15.2, 304.0, "index: AMC&nbsp;Javelin<br>mpg: 15.2"], [13.3, 350.0, "index: Camaro&nbsp;Z28<br>mpg: 13.3"], [19.2, 400.0, "index: Pontiac&nbsp;Firebird<br>mpg: 19.2"], [15.8, 351.0, "index: Ford&nbsp;Pantera&nbsp;L<br>mpg: 15.8"], [15.0, 301.0, "index: Maserati&nbsp;Bora<br>mpg: 15.0"]]}], options)

    if ($('#dftooltip').length == 0) {
        $("<div id='dftooltip'></div>").css({
            position: "absolute",
            display: "none",
            border: "1px solid #fdd",
            padding: "2px",
            "background-color": "#fee",
            "z-index": 1000,
            opacity: 0.80
            }).appendTo("body");
    }
    $('#dataframe_scatterplot_1').bind("plothover", function (event, pos, item) {
            if (item) {
                $("#dftooltip").html((item.series.label + ": " +
                    item.series.data[item.dataIndex][1].toString() + "<br>" +
                    item.series.data[item.dataIndex][2]).trim()).css({top: item.pageY+5, left: item.pageX+5})
                    .fadeIn(200);
            } else {
                $("#dftooltip").hide();
            }
    });
    }

// we will wait for the div to be displayed on the HTML/Jupyter side before we plot
// the figure. This might not be necessary but at least this is a chance for us
// to resize the div and avoid some flot error

var dt = 100;
// the frontend might be notified before the table is inserted as results.
function showFigure1() {
    if ( $('#dataframe_scatterplot_1').length === 0 || $.plot === undefined ) {
          dt = dt * 1.5; // slow-down checks for datatable as time goes on;
          setTimeout(showFigure1, dt);
          return;
   } else {
        $('#dataframe_scatterplot_1').css('width', '50vw').css('height', '38vw');
        plotScatterPlot1();
    }
}
showFigure1()
</script>
</div>
</div>

</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The advantage of this scatterplot is that you can see a description of data when you hover over the data points, which can be more informative than static figures produced by, for example, R.</p>
<p>The <code>scatterplot</code> style provides a number of options and you can use option <code>-h</code> with <code>-s</code> to display them:</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[24]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">preview</span> <span class="n">mtcars</span> <span class="o">-</span><span class="n">s</span> <span class="n">scatterplot</span> <span class="o">-</span><span class="n">h</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>usage: %preview -s scatterplot [-h] [--ylim YLIM YLIM] [--xlim XLIM XLIM]
                               [--log {x,y,xy,yx}] [--width WIDTH]
                               [--height HEIGHT] [-b BY [BY ...]]
                               [--show SHOW [SHOW ...]]
                               [-t [TOOLTIP [TOOLTIP ...]]] [-l LIMIT]
                               [cols [cols ...]]

positional arguments:
  cols                  Columns to plot, which should all be numeric. If one
                        column is specified, it is assumed to be a x-y plot
                        with x being 0, 1, 2, 3, .... If two or more columns
                        (n) are specified, n-1 series will be plotted with the
                        first column being the x axis, in which case an
                        &#34;_index&#34; name can be used to specify 0, 1, 2, 3, ....
                        This option can be igured if the dataframe has only
                        one or two columns.

optional arguments:
  -h, --help            show this help message and exit
  --ylim YLIM YLIM      Range of y-axis
  --xlim XLIM XLIM      Range of x-axis
  --log {x,y,xy,yx}     Make x-axis, y-axis, or both to logarithmic
  --width WIDTH         Width of the plot.
  --height HEIGHT       Height of the plot.
  -b BY [BY ...], --by BY [BY ...]
                        columns by which the data points are stratified.
  --show SHOW [SHOW ...]
                        What to show in the plot, can be &#39;lines&#39;, &#39;points&#39; or
                        both. Default to points, and lines if x-axis is
                        sorted.
  -t [TOOLTIP [TOOLTIP ...]], --tooltip [TOOLTIP [TOOLTIP ...]]
                        Fields to be shown in tooltip, in addition to the row
                        index and point values that would be shown by default.
  -l LIMIT, --limit LIMIT
                        Maximum number of records to plot.
</pre>
</div>
</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>For example, you can show more tooltips and multiple columns as follows:</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[25]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">preview</span> <span class="n">mtcars</span> <span class="o">-</span><span class="n">n</span> <span class="o">-</span><span class="n">s</span> <span class="n">scatterplot</span> <span class="n">_index</span> <span class="n">disp</span> <span class="n">hp</span> <span class="n">mpg</span> <span class="o">--</span><span class="n">tooltip</span> <span class="n">wt</span> <span class="n">qsec</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div class="sos_hint">> mtcars: DataFrame of shape (32, 11)</div>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">

<div class='scatterplot_container'>
<div class='scatterplot_by_rowname' id='dataframe_scatterplot_2' width='50vw' height='38vw'></div>
<script language="javascript" type="text/javascript" src="http://www.flotcharts.org/flot/jquery.flot.js"></script>
<script>
    var options = {"xaxis": {"ticks": [[0, "Mazda&nbsp;RX4"], [1, "Mazda&nbsp;RX4&nbsp;Wag"], [2, "Datsun&nbsp;710"], [3, "Hornet&nbsp;4&nbsp;Drive"], [4, "Hornet&nbsp;Sportabout"], [5, "Valiant"], [6, "Duster&nbsp;360"], [7, "Merc&nbsp;240D"], [8, "Merc&nbsp;230"], [9, "Merc&nbsp;280"], [10, "Merc&nbsp;280C"], [11, "Merc&nbsp;450SE"], [12, "Merc&nbsp;450SL"], [13, "Merc&nbsp;450SLC"], [14, "Cadillac&nbsp;Fleetwood"], [15, "Lincoln&nbsp;Continental"], [16, "Chrysler&nbsp;Imperial"], [17, "Fiat&nbsp;128"], [18, "Honda&nbsp;Civic"], [19, "Toyota&nbsp;Corolla"], [20, "Toyota&nbsp;Corona"], [21, "Dodge&nbsp;Challenger"], [22, "AMC&nbsp;Javelin"], [23, "Camaro&nbsp;Z28"], [24, "Pontiac&nbsp;Firebird"], [25, "Fiat&nbsp;X1&#8209;9"], [26, "Porsche&nbsp;914&#8209;2"], [27, "Lotus&nbsp;Europa"], [28, "Ford&nbsp;Pantera&nbsp;L"], [29, "Ferrari&nbsp;Dino"], [30, "Maserati&nbsp;Bora"], [31, "Volvo&nbsp;142E"]]}, "yaxis": {}, "series": {"lines": {"show": true}, "points": {"show": true}}, "grid": {"hoverable": true, "clickable": true}};
    function plotScatterPlot2() {
        plot = $.plot('#dataframe_scatterplot_2', [{"clickable": true, "hoverable": true, "label": "disp", "data": [[0, 160.0, "index: Mazda&nbsp;RX4<br>wt: 2.62<br>qsec: 16.46"], [1, 160.0, "index: Mazda&nbsp;RX4&nbsp;Wag<br>wt: 2.875<br>qsec: 17.02"], [2, 108.0, "index: Datsun&nbsp;710<br>wt: 2.32<br>qsec: 18.61"], [3, 258.0, "index: Hornet&nbsp;4&nbsp;Drive<br>wt: 3.215<br>qsec: 19.44"], [4, 360.0, "index: Hornet&nbsp;Sportabout<br>wt: 3.44<br>qsec: 17.02"], [5, 225.0, "index: Valiant<br>wt: 3.46<br>qsec: 20.22"], [6, 360.0, "index: Duster&nbsp;360<br>wt: 3.57<br>qsec: 15.84"], [7, 146.7, "index: Merc&nbsp;240D<br>wt: 3.19<br>qsec: 20.0"], [8, 140.8, "index: Merc&nbsp;230<br>wt: 3.15<br>qsec: 22.9"], [9, 167.6, "index: Merc&nbsp;280<br>wt: 3.44<br>qsec: 18.3"], [10, 167.6, "index: Merc&nbsp;280C<br>wt: 3.44<br>qsec: 18.9"], [11, 275.8, "index: Merc&nbsp;450SE<br>wt: 4.07<br>qsec: 17.4"], [12, 275.8, "index: Merc&nbsp;450SL<br>wt: 3.73<br>qsec: 17.6"], [13, 275.8, "index: Merc&nbsp;450SLC<br>wt: 3.78<br>qsec: 18.0"], [14, 472.0, "index: Cadillac&nbsp;Fleetwood<br>wt: 5.25<br>qsec: 17.98"], [15, 460.0, "index: Lincoln&nbsp;Continental<br>wt: 5.424<br>qsec: 17.82"], [16, 440.0, "index: Chrysler&nbsp;Imperial<br>wt: 5.345<br>qsec: 17.42"], [17, 78.7, "index: Fiat&nbsp;128<br>wt: 2.2<br>qsec: 19.47"], [18, 75.7, "index: Honda&nbsp;Civic<br>wt: 1.615<br>qsec: 18.52"], [19, 71.1, "index: Toyota&nbsp;Corolla<br>wt: 1.835<br>qsec: 19.9"], [20, 120.1, "index: Toyota&nbsp;Corona<br>wt: 2.465<br>qsec: 20.01"], [21, 318.0, "index: Dodge&nbsp;Challenger<br>wt: 3.52<br>qsec: 16.87"], [22, 304.0, "index: AMC&nbsp;Javelin<br>wt: 3.435<br>qsec: 17.3"], [23, 350.0, "index: Camaro&nbsp;Z28<br>wt: 3.84<br>qsec: 15.41"], [24, 400.0, "index: Pontiac&nbsp;Firebird<br>wt: 3.845<br>qsec: 17.05"], [25, 79.0, "index: Fiat&nbsp;X1&#8209;9<br>wt: 1.935<br>qsec: 18.9"], [26, 120.3, "index: Porsche&nbsp;914&#8209;2<br>wt: 2.14<br>qsec: 16.7"], [27, 95.1, "index: Lotus&nbsp;Europa<br>wt: 1.513<br>qsec: 16.9"], [28, 351.0, "index: Ford&nbsp;Pantera&nbsp;L<br>wt: 3.17<br>qsec: 14.5"], [29, 145.0, "index: Ferrari&nbsp;Dino<br>wt: 2.77<br>qsec: 15.5"], [30, 301.0, "index: Maserati&nbsp;Bora<br>wt: 3.57<br>qsec: 14.6"], [31, 121.0, "index: Volvo&nbsp;142E<br>wt: 2.78<br>qsec: 18.6"]]}, {"clickable": true, "hoverable": true, "label": "hp", "data": [[0, 110.0, "index: Mazda&nbsp;RX4<br>wt: 2.62<br>qsec: 16.46"], [1, 110.0, "index: Mazda&nbsp;RX4&nbsp;Wag<br>wt: 2.875<br>qsec: 17.02"], [2, 93.0, "index: Datsun&nbsp;710<br>wt: 2.32<br>qsec: 18.61"], [3, 110.0, "index: Hornet&nbsp;4&nbsp;Drive<br>wt: 3.215<br>qsec: 19.44"], [4, 175.0, "index: Hornet&nbsp;Sportabout<br>wt: 3.44<br>qsec: 17.02"], [5, 105.0, "index: Valiant<br>wt: 3.46<br>qsec: 20.22"], [6, 245.0, "index: Duster&nbsp;360<br>wt: 3.57<br>qsec: 15.84"], [7, 62.0, "index: Merc&nbsp;240D<br>wt: 3.19<br>qsec: 20.0"], [8, 95.0, "index: Merc&nbsp;230<br>wt: 3.15<br>qsec: 22.9"], [9, 123.0, "index: Merc&nbsp;280<br>wt: 3.44<br>qsec: 18.3"], [10, 123.0, "index: Merc&nbsp;280C<br>wt: 3.44<br>qsec: 18.9"], [11, 180.0, "index: Merc&nbsp;450SE<br>wt: 4.07<br>qsec: 17.4"], [12, 180.0, "index: Merc&nbsp;450SL<br>wt: 3.73<br>qsec: 17.6"], [13, 180.0, "index: Merc&nbsp;450SLC<br>wt: 3.78<br>qsec: 18.0"], [14, 205.0, "index: Cadillac&nbsp;Fleetwood<br>wt: 5.25<br>qsec: 17.98"], [15, 215.0, "index: Lincoln&nbsp;Continental<br>wt: 5.424<br>qsec: 17.82"], [16, 230.0, "index: Chrysler&nbsp;Imperial<br>wt: 5.345<br>qsec: 17.42"], [17, 66.0, "index: Fiat&nbsp;128<br>wt: 2.2<br>qsec: 19.47"], [18, 52.0, "index: Honda&nbsp;Civic<br>wt: 1.615<br>qsec: 18.52"], [19, 65.0, "index: Toyota&nbsp;Corolla<br>wt: 1.835<br>qsec: 19.9"], [20, 97.0, "index: Toyota&nbsp;Corona<br>wt: 2.465<br>qsec: 20.01"], [21, 150.0, "index: Dodge&nbsp;Challenger<br>wt: 3.52<br>qsec: 16.87"], [22, 150.0, "index: AMC&nbsp;Javelin<br>wt: 3.435<br>qsec: 17.3"], [23, 245.0, "index: Camaro&nbsp;Z28<br>wt: 3.84<br>qsec: 15.41"], [24, 175.0, "index: Pontiac&nbsp;Firebird<br>wt: 3.845<br>qsec: 17.05"], [25, 66.0, "index: Fiat&nbsp;X1&#8209;9<br>wt: 1.935<br>qsec: 18.9"], [26, 91.0, "index: Porsche&nbsp;914&#8209;2<br>wt: 2.14<br>qsec: 16.7"], [27, 113.0, "index: Lotus&nbsp;Europa<br>wt: 1.513<br>qsec: 16.9"], [28, 264.0, "index: Ford&nbsp;Pantera&nbsp;L<br>wt: 3.17<br>qsec: 14.5"], [29, 175.0, "index: Ferrari&nbsp;Dino<br>wt: 2.77<br>qsec: 15.5"], [30, 335.0, "index: Maserati&nbsp;Bora<br>wt: 3.57<br>qsec: 14.6"], [31, 109.0, "index: Volvo&nbsp;142E<br>wt: 2.78<br>qsec: 18.6"]]}, {"clickable": true, "hoverable": true, "label": "mpg", "data": [[0, 21.0, "index: Mazda&nbsp;RX4<br>wt: 2.62<br>qsec: 16.46"], [1, 21.0, "index: Mazda&nbsp;RX4&nbsp;Wag<br>wt: 2.875<br>qsec: 17.02"], [2, 22.8, "index: Datsun&nbsp;710<br>wt: 2.32<br>qsec: 18.61"], [3, 21.4, "index: Hornet&nbsp;4&nbsp;Drive<br>wt: 3.215<br>qsec: 19.44"], [4, 18.7, "index: Hornet&nbsp;Sportabout<br>wt: 3.44<br>qsec: 17.02"], [5, 18.1, "index: Valiant<br>wt: 3.46<br>qsec: 20.22"], [6, 14.3, "index: Duster&nbsp;360<br>wt: 3.57<br>qsec: 15.84"], [7, 24.4, "index: Merc&nbsp;240D<br>wt: 3.19<br>qsec: 20.0"], [8, 22.8, "index: Merc&nbsp;230<br>wt: 3.15<br>qsec: 22.9"], [9, 19.2, "index: Merc&nbsp;280<br>wt: 3.44<br>qsec: 18.3"], [10, 17.8, "index: Merc&nbsp;280C<br>wt: 3.44<br>qsec: 18.9"], [11, 16.4, "index: Merc&nbsp;450SE<br>wt: 4.07<br>qsec: 17.4"], [12, 17.3, "index: Merc&nbsp;450SL<br>wt: 3.73<br>qsec: 17.6"], [13, 15.2, "index: Merc&nbsp;450SLC<br>wt: 3.78<br>qsec: 18.0"], [14, 10.4, "index: Cadillac&nbsp;Fleetwood<br>wt: 5.25<br>qsec: 17.98"], [15, 10.4, "index: Lincoln&nbsp;Continental<br>wt: 5.424<br>qsec: 17.82"], [16, 14.7, "index: Chrysler&nbsp;Imperial<br>wt: 5.345<br>qsec: 17.42"], [17, 32.4, "index: Fiat&nbsp;128<br>wt: 2.2<br>qsec: 19.47"], [18, 30.4, "index: Honda&nbsp;Civic<br>wt: 1.615<br>qsec: 18.52"], [19, 33.9, "index: Toyota&nbsp;Corolla<br>wt: 1.835<br>qsec: 19.9"], [20, 21.5, "index: Toyota&nbsp;Corona<br>wt: 2.465<br>qsec: 20.01"], [21, 15.5, "index: Dodge&nbsp;Challenger<br>wt: 3.52<br>qsec: 16.87"], [22, 15.2, "index: AMC&nbsp;Javelin<br>wt: 3.435<br>qsec: 17.3"], [23, 13.3, "index: Camaro&nbsp;Z28<br>wt: 3.84<br>qsec: 15.41"], [24, 19.2, "index: Pontiac&nbsp;Firebird<br>wt: 3.845<br>qsec: 17.05"], [25, 27.3, "index: Fiat&nbsp;X1&#8209;9<br>wt: 1.935<br>qsec: 18.9"], [26, 26.0, "index: Porsche&nbsp;914&#8209;2<br>wt: 2.14<br>qsec: 16.7"], [27, 30.4, "index: Lotus&nbsp;Europa<br>wt: 1.513<br>qsec: 16.9"], [28, 15.8, "index: Ford&nbsp;Pantera&nbsp;L<br>wt: 3.17<br>qsec: 14.5"], [29, 19.7, "index: Ferrari&nbsp;Dino<br>wt: 2.77<br>qsec: 15.5"], [30, 15.0, "index: Maserati&nbsp;Bora<br>wt: 3.57<br>qsec: 14.6"], [31, 21.4, "index: Volvo&nbsp;142E<br>wt: 2.78<br>qsec: 18.6"]]}], options)

    if ($('#dftooltip').length == 0) {
        $("<div id='dftooltip'></div>").css({
            position: "absolute",
            display: "none",
            border: "1px solid #fdd",
            padding: "2px",
            "background-color": "#fee",
            "z-index": 1000,
            opacity: 0.80
            }).appendTo("body");
    }
    $('#dataframe_scatterplot_2').bind("plothover", function (event, pos, item) {
            if (item) {
                $("#dftooltip").html((item.series.label + ": " +
                    item.series.data[item.dataIndex][1].toString() + "<br>" +
                    item.series.data[item.dataIndex][2]).trim()).css({top: item.pageY+5, left: item.pageX+5})
                    .fadeIn(200);
            } else {
                $("#dftooltip").hide();
            }
    });
    }

// we will wait for the div to be displayed on the HTML/Jupyter side before we plot
// the figure. This might not be necessary but at least this is a chance for us
// to resize the div and avoid some flot error

var dt = 100;
// the frontend might be notified before the table is inserted as results.
function showFigure2() {
    if ( $('#dataframe_scatterplot_2').length === 0 || $.plot === undefined ) {
          dt = dt * 1.5; // slow-down checks for datatable as time goes on;
          setTimeout(showFigure2, dt);
          return;
   } else {
        $('#dataframe_scatterplot_2').css('width', '50vw').css('height', '38vw');
        plotScatterPlot2();
    }
}
showFigure2()
</script>
</div>
</div>

</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Command-sos-preview-">Command <code>sos preview</code> <a id="Command_sos_preview" /><a class="anchor-link" href="#Command-sos-preview-">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The <code>%preview</code> magic has a command line counterpart <code>sos preview</code>. This command cannot display any figure but can be convenient to preview content of compressed files and files that are not previewed by the operating system (e.g. <code>bam</code> files). The <code>-r</code> option is especially useful in previewing files on a remote host without logging to the remote host or copying the files to local host.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Execution-of-Workflows-">Execution of Workflows <a id="Execution_of_Workflows" /><a class="anchor-link" href="#Execution-of-Workflows-">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We have discussed markdown cells, subkernel cells, and SoS cells, which can be considered as a subkernel cell with SoS (Python) kernel. SoS notebook supports another type of cell, namely <strong>workflow cell</strong>.</p>
<p>A workflow cell is a SoS cell with one or more formal <strong>SoS steps</strong>, which are marked by a <strong>section header</strong>. In summary,</p>
<ul>
<li>A workflow cell can contain a complete workflow and be executed by magic <code>%run</code>.</li>
<li>Sections defined in all workflow cells in a notebook form <strong>notebook workflows</strong>, which can be executed by magic <code>%sosrun</code> or by command <code>sos run</code> (or <code>sos-runner</code>) from command line.</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Magic-%run-">Magic <code>%run</code> <a id="Magic_run" /><a class="anchor-link" href="#Magic-%run-">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Magic <code>%sos</code> executes the content of a cell, prepended with all <code>[global]</code> sections defined in the notebook, as a complete SoS workflow in a separate namespace.</p>
<p>For example, the following workflow cell defines a SoS step, but SoS Notebook will ignore it when you execute it with <code>Ctrl-Enter</code>.</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[26]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="p">[</span><span class="n">example_step</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;This is {step_name}&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>You can only execute such a cell with magic <code>%run</code>:</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[27]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">run</span>
<span class="p">[</span><span class="n">example_step_1</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;This is {step_name}&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>This is example_step_1
</pre>
</div>
</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The <code>%run</code> magic treats the content of the cell as a SoS workflow so you can put multiple sections in the cell</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[28]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">run</span>
<span class="p">[</span><span class="n">example_step_10</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;This is {step_name}&quot;</span><span class="p">)</span>

<span class="p">[</span><span class="n">example_step_20</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;This is {step_name}&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>This is example_step_10
This is example_step_20
</pre>
</div>
</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>You can have global section, define parameter, and execute the workflow multiple times with multiple <code>%run</code> magics:</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[29]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">run</span>
<span class="o">%</span><span class="n">run</span> <span class="o">--</span><span class="n">var</span> <span class="mi">200</span>

<span class="kn">parameter:</span> <span class="n">var</span> <span class="o">=</span> <span class="mi">100</span>

<span class="p">[</span><span class="n">example_step_15</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;This is {step_name} with option {var}&quot;</span><span class="p">)</span>

<span class="p">[</span><span class="n">example_step_25</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;This is {step_name}&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>This is example_step_15 with option 100
This is example_step_25
This is example_step_15 with option 200
This is example_step_25
</pre>
</div>
</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>It is important to remember that the workflow is executed in its own namespace so it needs to be self-contained. That is to say, if you define a variable in the SoS namespace,</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[30]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="n">var</span> <span class="o">=</span> <span class="mi">500</span>
</pre></div>

</div>
</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The variable is not available to the workflow</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[31]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">sandbox</span> <span class="o">--</span><span class="n">expect</span><span class="o">-</span><span class="n">error</span>
<span class="o">%</span><span class="n">run</span>
<span class="k">print</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>this is global
</pre>
</div>
</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>so you will have to pass it to the workflow as command line options</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[32]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">run</span> <span class="o">--</span><span class="n">var</span> <span class="p">{</span><span class="n">var</span><span class="p">}</span>
<span class="kn">parameter:</span> <span class="n">var</span> <span class="o">=</span> <span class="nb">int</span>
<span class="k">print</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div class="sos_hint">> %run --var 500<br></div>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>500
</pre>
</div>
</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>If you have multiple such definitions or if you have function definitions, you can define them in a <code>[global]</code> section, which will be executed before the cell workflow.</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[33]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="p">[</span><span class="k">global</span><span class="p">]</span>
<span class="n">var</span> <span class="o">=</span> <span class="s1">&#39;this is global&#39;</span>
</pre></div>

</div>
</div>
</div>

</div>
	</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[34]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">run</span>
<span class="k">print</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>this is global
</pre>
</div>
</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Similar to command line tool <code>sos run</code>, magic <code>%run</code> accepts a large number of parameters. Please refer to the output of <code>%run -h</code> for details.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Magic-%sosrun-">Magic <code>%sosrun</code> <a id="Magic_sosrun" /><a class="anchor-link" href="#Magic-%sosrun-">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Magic <code>%sosrun</code> is similar to <code>%sos</code> in its ability to execute workflows with many options, with the major difference in that it execute <strong>notebook workflows</strong>, which are defined by all sections defined in the notebook. The notebook workflow can be displayed with magic <code>%preview --workflow</code> and is the workflow that will be executed if the notebook is executed from the command line with command <code>sos run</code> or <code>sos-runner</code>.</p>
<p>It is worth noting that magics <code>%sosrun</code> and <code>%run</code> can be used together, so that you can run single workflows with <code>%run</code> and multiple workflows with <code>%sosrun</code>. For example, you can debug and execute single workflows with magic %run`</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[35]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">run</span> <span class="n">stepA</span> <span class="o">--</span><span class="n">var</span> <span class="mi">10</span>

<span class="p">[</span><span class="n">stepA</span><span class="p">]</span>
<span class="kn">parameter:</span> <span class="n">var</span> <span class="o">=</span> <span class="mi">20</span>
<span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;{step_name} with parameter {var}&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>stepA_0 with parameter 10
</pre>
</div>
</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>and execute many such workflows in batch mode with magic <code>%sosrun</code>:</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[36]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">sosrun</span> <span class="n">master</span>

<span class="p">[</span><span class="n">master</span><span class="p">]</span>
<span class="n">sos_run</span><span class="p">(</span><span class="s1">&#39;stepA&#39;</span><span class="p">,</span> <span class="n">var</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>stepA_0 with parameter 30
</pre>
</div>
</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Conversion-between-.ipynb-and-.sos-files">Conversion between <code>.ipynb</code> and <code>.sos</code> files<a class="anchor-link" href="#Conversion-between-.ipynb-and-.sos-files">&#182;</a></h2><p><a id="Conversion between `.ipynb` and `.sos` files
"></a>
You can save a Jupyter notebook with SoS kernel to a SoS script using <code>File -&gt; Download As -&gt; SoS</code> from the browser, or using command</p>

<pre><code>$ sos convert myscript.ipynb myscript.sos</code></pre>
<p>By default, <strong>only workflow cells will be saved to a <code>.sos</code> file to create a SoS script in correct syntax</strong>. You can also save all cells, including cells in other kernels in a '.sos' file using option <code>--all</code>, although the resulting <code>.sos</code> file might not be executable in bath mode.</p>
<p>You can convert an <code>.sos</code> script to <code>.ipynb</code> format using command</p>

<pre><code>$ sos convert myscript.sos myscript.ipynb</code></pre>
<p>or even to an executed notebook with option <code>--execute</code></p>

<pre><code>$ sos convert myscript.sos myscript.ipynb --execute</code></pre>
<p>and SoS will either assign each SoS step to a cell, or split the workflow according to some cell magic if the <code>.sos</code> was exported with the <code>--all</code> option.</p>
<p>Please refer to the tutorial on <a href="../tutorials/File_Conversion.html">File Conversion</a> for details of these commands.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Convert-.ipynb-to-HTML-format-">Convert <code>.ipynb</code> to HTML format <a id="Convert_ipynb_to_HTML_format" /><a class="anchor-link" href="#Convert-.ipynb-to-HTML-format-">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Because it is not particularly easy to open an <code>.ipynb</code> file (a live Jupyter server is required) and because of risk of changing the content of an <code>.ipynb</code> file, it is often desired to save an <code>.ipynb</code> file in HTML format.</p>
<p>Jupyter makes use of a template system to control the content and style of exported HTML file. For example, you can use the default Jupyter template (<code>File</code> -&gt; <code>Save As</code> -&gt; <code>HTML</code>) to save all input and output cells, or you can use the <a href="https://github.com/kirbs-/hide_code">hide code Jupyter extension</a> to manually hide input or output of each cell and produce a customized .HTML file.</p>
<p>SoS provides its own <code>template</code> called <code>sos-report</code>, which can be used from command line using command</p>

<pre><code>sos convert analysis.ipynb analysis.html --template sos-report</code></pre>
<p>or from within Jupyter with magic <code>%sossave</code> with specified filename</p>

<pre><code>%sossave analysis.html -f</code></pre>
<p>or using the same name as the notebook with option <code>--to html</code></p>

<pre><code>%sossave --to html -f</code></pre>
<p>Option <code>-f</code> overrides existing file if an output file already exists. You could also use other <code>sos</code> based templates such as <code>sos-full</code>, which displays all cells.</p>
<p>The generated HTML file has the following properties</p>
<ol>
<li><p>It by default only displays markdown cells, input and output cells with tag <code>report_cell</code>, and output cells with tag <code>report_output</code>.  This is the <strong>report view</strong> that only displays the results of interest.</p>
</li>
<li><p>If you point your mose to the left top corner of the window, a display control panel will be displayed for you to select additional items to display, including all input and output cells, input and output prompts, and various messages. This is the <strong>notebook view</strong> that displays all the details of the analysis.</p>
</li>
</ol>
<p>The <code>report_output</code> tag can be toggled using keyboard shortcut <code>Ctrl-Shift-O</code> and cells with this tag will be marked by a gray bar to the right of the output area. The <code>report_cell</code> and <code>scratch</code> tag has to be manually added through the <code>tag</code> toolbar (<code>View</code> -&gt; <code>Cell Toolbar</code> -&gt; <code>Tags</code>). Whereas <code>report_output</code> only works for output of code cells, the <code>scratch</code> tag applies to both markdown and code cells. Finally, if you have created your own customized template, you can define <code>sos-default-template</code> in a configuration file (eg. <code>sos config --set sos-default-template mytemplate.tpl</code>) instead of specifying it with option <code>--template</code> each time.</p>

</div>
</div>
</div>
    </div>
  </div>
</body>

 


</html>
