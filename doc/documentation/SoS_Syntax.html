<!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-107286198-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments)};
  gtag('js', new Date());

  gtag('config', 'UA-107286198-1');
</script>

<!DOCTYPE html>
<html>
<head><meta charset="utf-8" />
<title>SoS_Syntax</title><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.10/require.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>








<!-- Custom stylesheet, it must be in the same directory as the html file -->
<link rel="stylesheet" href="custom.css">

<!-- Loading mathjax macro -->
<!-- Load mathjax -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS_HTML"></script>
    <!-- MathJax configuration -->
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
            processEscapes: true,
            processEnvironments: true
        },
        // Center justify equations in code and markdown cells. Elsewhere
        // we use CSS to left justify single line equations in code cells.
        displayAlign: 'center',
        "HTML-CSS": {
            styles: {'.MathJax_Display': {"margin": 0}},
            linebreaks: { automatic: true }
        }
    });
    </script>
    <!-- End of mathjax configuration --></head>


 <meta name="viewport" content="width=device-width, initial-scale=1">
 <link rel="stylesheet" href="https://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Droid+Sans:400,700" rel="stylesheet">

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script>

<style>  /* defined here in case the main.css below cannot be loaded */
.lev1 {margin-left: 80px}
.lev2 {margin-left: 100px}
.lev3 {margin-left: 120px}
.lev4 {margin-left: 140px}
.lev5 {margin-left: 160px}
.lev6 {margin-left: 180px}
</style>

<link rel="stylesheet" type="text/css" href="../../css/jt.css">
<link rel="stylesheet" type="text/css" href="../../css/toc2.css">

<script src="../../js/doc_toc.js"></script>

 <script src="../../js/docs.js"></script>

<script>
    MathJax.Hub.Config({
        "HTML-CSS": {
            preferredFont: "TeX",
            availableFonts: ["STIX","TeX"],
            styles: {
                scale: 110,
                ".MathJax_Display": {
                    "font-size": "110%",
                }
            }
        }
    });
</script>

<script>

function filterDataFrame(id) {
    var input = document.getElementById("search_" + id);
    var filter = input.value.toUpperCase();
    var table = document.getElementById("dataframe_" + id);
    var tr = table.getElementsByTagName("tr");

    // Loop through all table rows, and hide those who don't match the search query
    for (var i = 1; i < tr.length; i++) {
        for (var j = 0; j < tr[i].cells.length; ++j) {
            var matched = false;
            if (tr[i].cells[j].innerHTML.toUpperCase().indexOf(filter) != -1) {
                tr[i].style.display = "";
                matched = true
                break;
            }
            if (!matched)
                tr[i].style.display = "none";
        } 
    }
}

function sortDataFrame(id, n, dtype) {
    var table = document.getElementById("dataframe_" + id);

    var tb = table.tBodies[0]; // use `<tbody>` to ignore `<thead>` and `<tfoot>` rows
    var tr = Array.prototype.slice.call(tb.rows, 0); // put rows into array

    if (dtype === 'numeric') {
        var fn = function(a, b) { 
            return parseFloat(a.cells[n].textContent) <= parseFloat(b.cells[n].textContent) ? -1 : 1;
        }
    } else {
        var fn = function(a, b) {
            var c = a.cells[n].textContent.trim().localeCompare(b.cells[n].textContent.trim()); 
            return c > 0 ? 1 : (c < 0 ? -1 : 0) }
    }
    var isSorted = function(array, fn) {
        if (array.length < 2)
            return 1;
        var direction = fn(array[0], array[1]); 
        for (var i = 1; i < array.length - 1; ++i) {
            var d = fn(array[i], array[i+1]);
            if (d == 0)
                continue;
            else if (direction == 0)
                direction = d;
            else if (direction != d)
                return 0;
            }
        return direction;
    }

    var sorted = isSorted(tr, fn);

    if (sorted == 1 || sorted == -1) {
        // if sorted already, reverse it
        for(var i = tr.length - 1; i >= 0; --i)
            tb.appendChild(tr[i]); // append each row in order
    } else {
        tr = tr.sort(fn);
        for(var i = 0; i < tr.length; ++i)
            tb.appendChild(tr[i]); // append each row in order
    }
}

$( document ).ready(function(){

            var cfg={'threshold':4,     // depth of toc (number of levels)
             // 'number_sections': true,  // sections numbering
             'number_sections': false, 
             'toc_cell': false,          // useless here
             'toc_window_display': true, // display the toc window
             "toc_section_display": "block", // display toc contents in the window
             // 'sideBar':true,      
             'sideBar':true,       // sidebar or floating window
             'navigate_menu':false       // navigation menu (only in liveNotebook -- do not change)
            }

            var st={};                  // some variables used in the script
            st.rendering_toc_cell = false;
            st.config_loaded = false;
            st.extension_initialized=false;
            st.nbcontainer_marginleft = $('#notebook-container').css('margin-left')
            st.nbcontainer_marginright = $('#notebook-container').css('margin-right')
            st.nbcontainer_width = $('#notebook-container').css('width')
            st.oldTocHeight = undefined
            st.cell_toc = undefined;
            st.toc_index=0;

            // fire the main function with these parameters



            table_of_contents(cfg,st);

            var file=documentationDict[$("h1:first").attr("id")];
            var path="http://vatlab.github.io/sos-docs"
            $("#toc-level0 a").css("color","#126dce");
            $('a[href="#'+$("h1:first").attr("id")+'"]').hide()
            var docs=documentation;
            var pos=documentation.indexOf(file);
        
            for (var a=pos;a>=0;a--){
                  var name=docs[a]
                  $('<li><a href="'+path+'/doc/documentation/'+name+'.html">'+name.replace(/_/g," ")
                   + '&nbsp ' + '<i class="fa ' +
                      (a === pos ? 'fa-caret-down' : 'fa-caret-right') + '"></i>' +'</a></li>').insertBefore("#toc-level0 li:eq(0)");
            }
            $('a[href="'+path+'/doc/documentation/'+file+'.html'+'"]').css("color","#126dce");


            for (var a=pos+1;a<docs.length;a++){
                  var name=docs[a]
                  $(".toc #toc-level0").append('<li><a href="'+path+'/doc/documentation/'+name+'.html">'+name.replace(/_/g," ")
                    + '&nbsp' + '<i class="fa fa-caret-right"></i>' +'</a></li>');
            }

            // var docs=documentation
            // for (var a =0;a<docs.length;a++){
            //       var name =docs[a];
            //       $(".toc #toc-level0").append('<li><a href="'+path+'/doc/documentation/'+name+'.html">'+name.split("_").join(" ")+'</a></li>');
            // }
            // var home=$("#toc-level0 #indexHome");
          
            // home.insertBefore("#toc-level0 li:eq(0)");

            // $("#toc-level0 li").filter(".home").insertBefore($("#toc-level0 li").filter(':nth-child(1)'));
            // $("#toc").attr("style","max-height:938px")


    });
</script><style>  /* defined here in case the main.css below cannot be loaded */

 .lan_SoS {}.lan_Bash .input_prompt { background-color: #E6EEFF !important }.lan_Python3 .input_prompt { background-color: #FFE771 !important }.lan_R .input_prompt { background-color: #DCDCDA !important }

</style>
<body>
  <div tabindex="-1" id="notebook" class="border-box-sizing">
    <div class="container" id="notebook-container">

<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="SoS-Syntax">SoS Syntax<a class="anchor-link" href="#SoS-Syntax">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Terminology-&amp;-Grammar">Terminology &amp; Grammar<a class="anchor-link" href="#Terminology-&amp;-Grammar">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>A SoS <strong>script</strong> defines one or more <strong>workflows</strong>, and each workflow consists of one or more <strong>steps</strong>.</p>
<p>SoS steps are defined by SoS <strong>sections</strong>. A SoS <strong>section</strong> consists of a <strong>header</strong> with one or more step names and optional options. The body of a SoS section consists of optional <strong>comments</strong>, <strong>statements</strong>, <strong>input</strong>, <strong>output</strong>, <strong>depends</strong> directives, <strong>parameter</strong> definitions, and external <strong>task</strong> definition.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The following terms will be used throughout this documentation:</p>
<ul>
<li><strong>Script</strong>: A SoS script that defines one or more workflows.</li>
<li><strong>section</strong>: A group of statements with a header that defines one or more SoS steps.</li>
<li><strong>Workflow</strong>: A sequence of steps that can be executed to complete certain task.</li>
<li><strong>Step</strong>: A step of a workflow that performs one piece of the workflow.</li>
<li><strong>Target</strong>: Objects that are input or result of a SoS step, which are usually files, but can also be objects such as executable commands and SoS variables.</li>
<li><strong>Step options</strong>: Options of the step that assist the definition of the workflow.</li>
<li><strong>Step input</strong>: Specifies the input files of the step.</li>
<li><strong>Step output</strong>: Specifies the output files and targets of the step.</li>
<li><strong>Step dependencies</strong>: Specifies the files and targets that are required by the step.</li>
<li><strong>Step process</strong>: The process that a step executes to complete specified work, specified as one or more Python statements. It consists of all statements after step input specification, or all statements in a step if no input is specified, excluding other SoS directives such as step output and dependencies.</li>
<li><strong>Task</strong>: Part or all step processes that will be executed outside of SoS, and potentially on a different server. These are usually resource intensive jobs that will take a long time to complete.</li>
<li><strong>Action</strong>: SoS or user-defined Python functions. They differ from regular Python functions in that they may behave differently in different running mode of SoS (e.g. ignore when executed in dryrun mode).</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>More formally defined, the SoS syntax obeys the following grammar, given in extended Backus-Naur form (EBNF):</p>

<pre><code>Script         = {comment}, {step};
comment        = "#", text, NEWLINE
assignment     = name, "=", expression, NEWLINE</code></pre>
<p>with SoS steps defined as</p>

<pre><code>step           = [step_header],
                 {comment}, {{statement}, [input | output | depends ]},
                 [process, NEWLINE, {script} ]
step_header    = "[", step_names, [":", names | options], "]", NEWLINE
parameter      = "parameter", ":", assignment
input          = "input", ":", [expressions], [",", options], NEWLINE
output         = "output", ":", [expressions], [",", options], NEWLINE
depends        = "depends", ":", [expressions], [",", options], NEWLINE
task           = "task", ":",  [options]
action         = func_format | script_format
func_format    = name, "(", [options], ")"
script_format  = name, ":", [options], NEWLINE, script 
step_names     = step_name | step_pattern, ["(", text, ")"],
                 {",", step_name | steo_pattern, ["(", text, ")"]}
names          = name, {",", name}
workflow       = name, ['_', steps], {"+", name, ['_', steps}
assignment     = name, "=", expression, NEWLINW
expressions    = expression, {",", expression}
options        = option, {"," option}
option         = name, "=", expression
step_name      = letter, { letter | digit | "-" | "_" }
step_pattern   = {letter | digit | "*" | "?" | "-" | "_"}</code></pre>
<p>Here <code>name</code>, <code>expression</code> and <code>statement</code> are arbitrary <a href="http://www.python.org">Python 3</a> names, expression and statements with added SoS features.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>SoS is based on the Python 3 (3.6 and above) programming language</strong>. If you are unfamiliar with Python, you can learn some basics of Python, usually in less than half a day, by reading some Python tutorials (e.g. <a href="https://docs.python.org/3/tutorial/">the official python tutorial</a>). This <a href="https://docs.python.org/3/tutorial/introduction.html">short introduction</a> is good enough for you to get started with SoS.</p>
<p>SoS adds the following syntax to standard Python syntax:</p>
<table>
<thead><tr>
<th>syntax</th>
<th>Example</th>
<th>Main Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Script format of function call</strong></td>
<td><code>R: expand=True</code><br><code>data &lt;- read.csv("{_input}")</code></td>
<td>Verbatim inclusion of scripts with optional indentation and string interpolation</td>
</tr>
<tr>
<td><strong>Section specification</strong></td>
<td><code>[align_20]</code></td>
<td>Define steps of workflows</td>
</tr>
<tr>
<td><strong>SoS statements</strong></td>
<td></td>
<td>Direct execution of steps</td>
</tr>
<tr>
<td></td>
<td><strong><code>parameter</code></strong><code>: cutoff=10</code></td>
<td>Obtain option from command line or workflow caller</td>
</tr>
<tr>
<td></td>
<td><strong><code>input</code></strong><code>: fastq_files</code></td>
<td>Specify input files of a step</td>
</tr>
<tr>
<td></td>
<td><strong><code>output</code></strong><code>: f"{_input}.idx"</code></td>
<td>Specify output files of a step</td>
</tr>
<tr>
<td></td>
<td><strong><code>depends</code></strong><code>: hg19_fa</code></td>
<td>Specify step dependencies</td>
</tr>
<tr>
<td></td>
<td><strong><code>task</code></strong><code>: queue='cluster'</code></td>
<td>Specify external tasks</td>
</tr>
</tbody>
</table>
<p>This chapter demonstrates general features such as string interpolation, section specification, parameter specification, and specification of workflows. Please refer to chapters <a href="SoS_Step.html">SoS Step</a> and <a href="Remote_Execution.html">Remote Exection</a> for more details on <code>input</code>, <code>output</code>, <code>depends</code>, and <code>task</code> statements.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Script-style-function-call">Script style function call<a class="anchor-link" href="#Script-style-function-call">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>SoS allows you to write Python functions that accept a script (string) as the first parameter in a special script format. For example, an SoS function <code>R</code> that executes a script</p>
<div class="highlight"><pre><span></span><span class="n">R</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">pdf(&#39;output.pdf&#39;)</span>
<span class="s2">plot(0, 0)</span>
<span class="s2">dev.off()</span>
<span class="s2">&quot;&quot;&quot;</span><span class="p">,</span> <span class="kp">workdir</span><span class="o">=</span><span class="s1">&#39;result&#39;</span><span class="p">)</span>
</pre></div>
<p>can be written as</p>
<div class="highlight"><pre><span></span><span class="kn">R:</span>  <span class="kp">workdir</span><span class="o">=</span><span class="s1">&#39;result&#39;</span>
<span class="n">pdf</span><span class="p">(</span><span class="s1">&#39;output.pdf&#39;</span><span class="p">)</span>
<span class="n">plot</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">dev</span><span class="o">.</span><span class="n">off</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>SoS <strong>automatically dedents scripts in script format</strong> so that you can indent the scripts (add equal amount of leading white spaces to all lines) and write the above example as</p>
<div class="highlight"><pre><span></span><span class="kn">R:</span>  <span class="kp">workdir</span><span class="o">=</span><span class="s1">&#39;result&#39;</span>
   <span class="n">pdf</span><span class="p">(</span><span class="s1">&#39;output.pdf&#39;</span><span class="p">)</span>
   <span class="n">plot</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
   <span class="n">dev</span><span class="o">.</span><span class="n">off</span><span class="p">()</span>
</pre></div>
<p>The latter is much preferred because it avoids trouble if the script contains SoS-like syntax such as <code>[1]</code> and <code>option:</code> and be treated as SoS directives, and more importantly, allows starting a new statement from a non-indented line. For example, <code>print('Hello world')</code> would be considered part of a R script in</p>
<div class="highlight"><pre><span></span><span class="kn">R:</span>  <span class="kp">workdir</span><span class="o">=</span><span class="s1">&#39;result&#39;</span>
<span class="n">pdf</span><span class="p">(</span><span class="s1">&#39;output.pdf&#39;</span><span class="p">)</span>
<span class="n">plot</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">dev</span><span class="o">.</span><span class="n">off</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Hello world&#39;</span><span class="p">)</span>
</pre></div>
<p>but a separate statement in</p>
<div class="highlight"><pre><span></span><span class="kn">R:</span>  <span class="kp">workdir</span><span class="o">=</span><span class="s1">&#39;result&#39;</span>
   <span class="n">pdf</span><span class="p">(</span><span class="s1">&#39;output.pdf&#39;</span><span class="p">)</span>
   <span class="n">plot</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
   <span class="n">dev</span><span class="o">.</span><span class="n">off</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Hello world&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The script format also accepts an option <code>expand</code> that <strong>expands expressions enclosed in specified sigils</strong> (<a href="https://www.python.org/dev/peps/pep-0498/">literal string interpolation</a>). Using <code>expand=True</code>, the included script is converted to a Python f-string so that the string will be interpolated when it is executed. For example,</p>

<pre><code>output = 'output.pdf'
R: workdir='result', expand=True
   pdf('{output}')
   plot(0, 0)
   dev.off()</code></pre>
<p>will be translated to</p>

<pre><code>output = 'output.pdf'
R(f'''\
pdf('{output}')
plot(0, 0)
dev.off()
''', workdir='result')</code></pre>
<p>which will be expanded to</p>

<pre><code>R('''\
pdf('output.pdf')
plot(0, 0)
dev.off()
''', workdir='result')</code></pre>
<p>when the action is executed.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Although the use of expressions in literal string (<code>{ }</code> parts) is very convenient, the braces might conflict with the braces in languages such as R for which braces are widely used. The official method to include braces in such literal stringS is to double the braces (<code>{{ }}</code>)  as in the following example</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="kn">R:</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span>
    <span class="k">if</span> <span class="p">({</span><span class="n">a</span><span class="p">}</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{{</span>
      <span class="n">cat</span><span class="p">(</span><span class="s2">&quot;This is 1</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">);</span>
    <span class="p">}}</span> <span class="k">else</span> <span class="p">{{</span>
      <span class="n">cat</span><span class="p">(</span><span class="s2">&quot;This is not 1</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">);</span>
    <span class="p">}}</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Generating myfigure.pdf
</pre>
</div>
</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>However, as you can imagine, inclusion of long scripts with lots of braces like this could be tedious and error-prone. For this reason, SoS allows you to use an alternative sigil for the format string. For example, using <code>expand='${ }'</code>, you can expand expressions inside <code>${ }</code> instead of <code>{ }</code> for string interpolation and do not have to double the braces.</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="kn">R:</span> <span class="n">expand</span><span class="o">=</span><span class="s1">&#39;${ }&#39;</span>
    <span class="k">if</span> <span class="p">(</span><span class="err">$</span><span class="p">{</span><span class="n">a</span><span class="p">}</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">cat</span><span class="p">(</span><span class="s2">&quot;This is 1</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="n">cat</span><span class="p">(</span><span class="s2">&quot;This is not 1</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Generating myfigure.pdf
</pre>
</div>
</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The sigil specified by parameter <code>expand</code> should be a string with a single space separating left and right sigils (e.g. <code>"[ ]"</code>, <code>"s( )"</code>, <code>"&lt; &gt;"</code>). Note that the use of alternative sigils is just a convenient way for you to include large trunks of scripts with braces. Under the hood SoS will convert the string to properly formatted f-strings with doubled braces and <code>{ }</code> sigils.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>As a final note, the SoS script format could be confused with Python's type hint syntax but SoS is able to tell the differences and treat them correctly:</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="kn">var :</span> <span class="nb">str</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">var</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[3]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>5</pre>
</div>

</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="SoS-Target-classes">SoS Target classes<a class="anchor-link" href="#SoS-Target-classes">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The concept of <strong>target</strong> plays an important role in SoS. A <strong>target</strong> is an object that that be created and detected. A SoS step can take a list of targets as input, check the existence of a list of dependent targets, and produce a list of targets as output. Targets can be created, removed, and their contents are tracked by SoS with <strong>signatures</strong>. For example, SoS can skip a workflow step if its output has been created, but will still rerun the step if the input file has been changed. A target can also be <strong>zapped</strong>, namely with its content replaced by its signature, so a target can be considered "exist" (so that a step can be skipped) but "non-exist" if the actual content is needed.</p>
<p>As illustrated by the following diagram, SoS supports a number of built-in targets such as <code>file_target</code>, <code>sos_variable</code>, <code>executable</code>, and targets defined by language modules such as <code>R_Library</code> for <code>R</code>. This section will describe general usage of targets and syntax for the most frequently used target <code>file_target</code>. Please refer to Chapter <a href="Targets_and_Actions.html">Targets and Actions</a> for descriptions of other target types. Note that <strong>SoS provides a very flexible and intuitive set of methods to work with files and list of files, gearing towards converting and using different formats of filenames in different scripts</strong>. You do not have to understand all the technical details but learning how to use <code>path</code> and <code>path</code> would great facilitate the use of filenames in SoS.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="../media/target_classes.png" alt="sos_step"></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="File-and-directory-names-(path-objects)">File and directory names (<code>path</code> objects)<a class="anchor-link" href="#File-and-directory-names-(path-objects)">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The <code>path</code> type handles the manipulation of file and directory names. It is derived from Python <a href="https://docs.python.org/3/library/pathlib.html">pathlib.Path</a> so you can use any of the properties and functions defined for this class. For example,</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="n">path</span><span class="p">(</span><span class="s1">&#39;~/sos-docs/src/documentation/SoS_Syntax.ipynb&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
	</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">expanduser</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[5]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>path(&#39;/Users/bpeng1/sos-docs/src/documentation/SoS_Syntax.ipynb&#39;)</pre>
</div>

</div>

</div>
</div>

</div>
	</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="kp">name</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[6]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;SoS_Syntax.ipynb&#39;</pre>
</div>

</div>

</div>
</div>

</div>
	</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">parent</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[7]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>path(&#39;~/sos-docs/src/documentation&#39;)</pre>
</div>

</div>

</div>
</div>

</div>
	</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s1">&#39;something.txt&#39;</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[8]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>path(&#39;~/sos-docs/src/documentation/something.txt&#39;)</pre>
</div>

</div>

</div>
</div>

</div>
	</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[9]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">suffix</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[9]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;.ipynb&#39;</pre>
</div>

</div>

</div>
</div>

</div>
	</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[10]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">parts</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[10]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(&#39;~&#39;, &#39;sos-docs&#39;, &#39;src&#39;, &#39;documentation&#39;, &#39;SoS_Syntax.ipynb&#39;)</pre>
</div>

</div>

</div>
</div>

</div>
	</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[11]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[11]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>False</pre>
</div>

</div>

</div>
</div>

</div>
	</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[12]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">is_dir</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[12]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>False</pre>
</div>

</div>

</div>
</div>

</div>
	</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[13]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">with_name</span><span class="p">(</span><span class="s1">&#39;SoS_Syntax.html&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[13]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>path(&#39;~/sos-docs/src/documentation/SoS_Syntax.html&#39;)</pre>
</div>

</div>

</div>
</div>

</div>
	</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[14]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">with_suffix</span><span class="p">(</span><span class="s1">&#39;.html&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[14]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>path(&#39;~/sos-docs/src/documentation/SoS_Syntax.html&#39;)</pre>
</div>

</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>and you can evaluate <code>path</code> in format strings as</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[15]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="n">f</span><span class="s2">&quot;Hello My name is {p.name}&quot;</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[15]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;Hello My name is SoS_Syntax.ipynb&#39;</pre>
</div>

</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Note that <code>path</code> offers a <a href="https://docs.python.org/3/library/os.html#os.PathLike"><code>os.PathLike</code></a> interface and can be used directly with <code>os.path</code> functions such as</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[16]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getsize</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">expanduser</span><span class="p">())</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[16]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>0</pre>
</div>

</div>

</div>
</div>

</div>
	</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[17]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[17]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;/Users/bpeng1/sos-docs/src/documentation/SoS_Syntax.ipynb&#39;</pre>
</div>

</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>and while <code>p.expanduser()</code> returns a <code>path</code> object, the traditional <code>os.path.expanduser</code> returns a <code>str</code>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>On top of regular <code>pathlib.Path</code> functionalities, <strong><code>path</code> allows you to add <code>path</code> to a <code>str</code> and with a <code>str</code> as result</strong>. So, for example, with</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[18]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="n">path</span><span class="p">(</span><span class="s1">&#39;test.txt&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>p + '.tmp'</code> returns a string, which is essentially <code>str(p) + '.tmp'</code></p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[19]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="n">p</span> <span class="o">+</span> <span class="s1">&#39;.tmp&#39;</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[19]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;test.txt.tmp&#39;</pre>
</div>

</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>If you need a <code>path</code> as result, simply convert the <code>str</code> to <code>path</code> with</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[20]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="n">path</span><span class="p">(</span><span class="n">p</span> <span class="o">+</span> <span class="s1">&#39;.tmp&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[20]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>path(&#39;test.txt.tmp&#39;)</pre>
</div>

</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The second difference is that <code>path</code> <strong>accepts a list of format options to easily format path in different formats</strong>:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<table>
<thead><tr>
<th style="text-align:left">convertor</th>
<th style="text-align:left">operation</th>
<th style="text-align:left">effect</th>
<th style="text-align:left">operant</th>
<th style="text-align:left">output</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>a</code></td>
<td style="text-align:left">absolute path</td>
<td style="text-align:left"><code>abspath(expanduser())</code></td>
<td style="text-align:left"><code>~/SoS/test.sos</code></td>
<td style="text-align:left"><code>/path/to/user/SoS/test.sos</code></td>
</tr>
<tr>
<td style="text-align:left"><code>b</code></td>
<td style="text-align:left">base filename</td>
<td style="text-align:left"><code>basename())</code></td>
<td style="text-align:left"><code>~/SoS/test.sos</code></td>
<td style="text-align:left"><code>test.sos</code></td>
</tr>
<tr>
<td style="text-align:left"><code>e</code></td>
<td style="text-align:left">escape</td>
<td style="text-align:left"><code>replace(' ', '\\ ')</code></td>
<td style="text-align:left"><code>file 1.txt</code></td>
<td style="text-align:left"><code>file\ 1.txt</code></td>
</tr>
<tr>
<td style="text-align:left"><code>d</code></td>
<td style="text-align:left">directory name</td>
<td style="text-align:left"><code>dirname())</code></td>
<td style="text-align:left"><code>~/SoS/test.sos</code></td>
<td style="text-align:left"><code>/path/to/user/SoS/</code></td>
</tr>
<tr>
<td style="text-align:left"><code>l</code></td>
<td style="text-align:left">expand link</td>
<td style="text-align:left"><code>realpath(expanduser())</code></td>
<td style="text-align:left"><code>~/SoS/test.sos</code></td>
<td style="text-align:left"><code>/realpath/to/test.sos</code></td>
</tr>
<tr>
<td style="text-align:left"><code>n</code></td>
<td style="text-align:left">remove extension</td>
<td style="text-align:left"><code>splitext()[0]</code></td>
<td style="text-align:left"><code>~/SoS/test.sos</code></td>
<td style="text-align:left"><code>~/SoS/test</code></td>
</tr>
<tr>
<td style="text-align:left"><code>p</code></td>
<td style="text-align:left">posix name</td>
<td style="text-align:left"><code>replace('\\', '/')...</code></td>
<td style="text-align:left"><code>c:\\Users</code></td>
<td style="text-align:left"><code>/c/Users</code></td>
</tr>
<tr>
<td style="text-align:left"><code>q</code></td>
<td style="text-align:left">quote</td>
<td style="text-align:left"><code>quoted()</code></td>
<td style="text-align:left"><code>file 1.txt</code></td>
<td style="text-align:left"><code>'file 1.txt'</code></td>
</tr>
<tr>
<td style="text-align:left"><code>r</code></td>
<td style="text-align:left">repr</td>
<td style="text-align:left"><code>repr()</code></td>
<td style="text-align:left"><code>file.txt</code></td>
<td style="text-align:left"><code>'file.txt'</code></td>
</tr>
<tr>
<td style="text-align:left"><code>s</code></td>
<td style="text-align:left">str</td>
<td style="text-align:left"><code>str()</code></td>
<td style="text-align:left"><code>file.txt</code></td>
<td style="text-align:left"><code>file.txt</code></td>
</tr>
<tr>
<td style="text-align:left"><code>R</code></td>
<td style="text-align:left">resolve remote and other targets</td>
<td style="text-align:left"><code>.resolve()</code></td>
<td style="text-align:left"><code>remote('a.txt')</code></td>
<td style="text-align:left"><code>a.txt</code></td>
</tr>
<tr>
<td style="text-align:left"><code>u</code></td>
<td style="text-align:left">expand user</td>
<td style="text-align:left"><code>expanduser()</code></td>
<td style="text-align:left"><code>~/SoS/test.sos</code></td>
<td style="text-align:left"><code>/path/to/user/SoS/test.sos</code></td>
</tr>
<tr>
<td style="text-align:left"><code>x</code></td>
<td style="text-align:left">file extension</td>
<td style="text-align:left"><code>splitext()[1]</code></td>
<td style="text-align:left"><code>~/SoS/test.sos</code></td>
<td style="text-align:left"><code>.sos</code></td>
</tr>
<tr>
<td style="text-align:left"><code>,</code></td>
<td style="text-align:left">join with comma</td>
<td style="text-align:left"><code>','.join()</code></td>
<td style="text-align:left"><code>['a.txt', 'b.txt']</code></td>
<td style="text-align:left"><code>a.txt,b.txt</code></td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>These format options allow you to pass filenames to scripts in different formats. For example, it would be perfectly OK to pass <code>~/a.txt</code> to a shell script, but a <code>u</code> formatter should be added if you are passing the filename to a script that does not understand <code>~</code> in filenames. For example,</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[21]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">preview</span> <span class="o">-</span><span class="n">n</span> <span class="kp">name</span> <span class="n">filename</span> <span class="n">basefilename</span> <span class="n">expanded</span> <span class="n">parparname</span>
<span class="nb">file</span> <span class="o">=</span> <span class="n">path</span><span class="p">(</span><span class="s1">&#39;~/sos/examples/update_toc.sos&#39;</span><span class="p">)</span>
<span class="kp">name</span> <span class="o">=</span> <span class="n">f</span><span class="s2">&quot;{file:n}&quot;</span>
<span class="n">filename</span> <span class="o">=</span> <span class="n">f</span><span class="s2">&quot;{file:b}&quot;</span>
<span class="n">basefilename</span> <span class="o">=</span> <span class="n">f</span><span class="s2">&quot;{file:bn}&quot;</span>
<span class="n">expanded</span> <span class="o">=</span> <span class="n">f</span><span class="s2">&quot;{file:u}&quot;</span>
<span class="n">parparname</span> <span class="o">=</span> <span class="n">f</span><span class="s2">&quot;{file:ddb}&quot;</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div class="sos_hint">> name: str of length 25</div>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>




<div class="output_text output_subarea ">
<pre>&#39;~/sos/examples/update_toc&#39;</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div class="sos_hint">> filename: str of length 14</div>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>




<div class="output_text output_subarea ">
<pre>&#39;update_toc.sos&#39;</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div class="sos_hint">> basefilename: str of length 10</div>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>




<div class="output_text output_subarea ">
<pre>&#39;update_toc&#39;</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div class="sos_hint">> expanded: str of length 41</div>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>




<div class="output_text output_subarea ">
<pre>&#39;/Users/bpeng1/sos/examples/update_toc.sos&#39;</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div class="sos_hint">> parparname: str of length 3</div>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>




<div class="output_text output_subarea ">
<pre>&#39;sos&#39;</pre>
</div>

</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The last example is pretty interesting because it applies three converters and gets the name of grand-parent directory using an equivalence of <code>basename(dirname(dirname(file)))</code>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Note that, for completeness, we list the <code>R</code> formatter here although this formatter is used to resolve special targets, for example a <code>remote</code> target <code>remote(target)</code>, to a regular <code>BaseTarget</code> and an <code>executable</code> target to its command name. For example,</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[22]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">sos_targets</span><span class="p">(</span><span class="n">remote</span><span class="p">(</span><span class="s1">&#39;file.txt&#39;</span><span class="p">),</span> <span class="n">sos_variable</span><span class="p">(</span><span class="s1">&#39;some&#39;</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

</div>
	</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[23]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="n">f</span><span class="s2">&quot;{a}&quot;</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[23]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;remote(&#34;file.txt&#34;) sos_variable(&#34;some&#34;)&#39;</pre>
</div>

</div>

</div>
</div>

</div>
	</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[24]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="n">f</span><span class="s2">&quot;{a:R,}&quot;</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[24]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;file.txt,some&#39;</pre>
</div>

</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Finally, <code>path</code> formats the object with these format operators and then the resulting string with additional formatters. For example, you can format the <code>path</code> object as a regular string</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[25]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="n">f</span><span class="s2">&quot;{file:&gt;50}&quot;</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[25]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;                     ~/sos/examples/update_toc.sos&#39;</pre>
</div>

</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>or apply <code>path</code> formatter (<code>bn</code> for base name of filename) and then as a regular string.</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[26]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="n">f</span><span class="s2">&quot;{file:bn&gt;50}&quot;</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[26]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;                                        update_toc&#39;</pre>
</div>

</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Path-list-(paths-object)">Path list (<code>paths</code> object)<a class="anchor-link" href="#Path-list-(paths-object)">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The <code>paths</code> type keeps a list of <code>path</code> objects. It can be initialized from one or more paths or lists of paths. Lists of paths will be flattened and concatenated so the end result will always be an one-dimensional list. The variables appear to be a sequence that can be sliced, iterated, and even compared to a regular list correctly. For example, the following statement creates a <code>paths</code> object with three filenames from a single filename and a list of two filenames:</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[27]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="n">targets</span> <span class="o">=</span> <span class="n">paths</span><span class="p">(</span><span class="s1">&#39;a.txt&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;b.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;c.txt&#39;</span><span class="p">])</span>
<span class="n">targets</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[27]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[path(&#39;a.txt&#39;), path(&#39;b.txt&#39;), path(&#39;c.txt&#39;)]</pre>
</div>

</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>You can access one or more elements of a <code>paths</code> or iterate through it</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[28]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="n">targets</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[28]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>path(&#39;c.txt&#39;)</pre>
</div>

</div>

</div>
</div>

</div>
	</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[29]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="n">targets</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[29]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[path(&#39;b.txt&#39;), path(&#39;c.txt&#39;)]</pre>
</div>

</div>

</div>
</div>

</div>
	</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[30]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">targets</span><span class="p">:</span>
   <span class="k">print</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>a.txt
b.txt
c.txt
</pre>
</div>
</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>To convert a <code>paths</code> object to a regular list, you can use function <code>list</code></p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[31]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="nb">list</span><span class="p">(</span><span class="n">targets</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[31]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[path(&#39;a.txt&#39;), path(&#39;b.txt&#39;), path(&#39;c.txt&#39;)]</pre>
</div>

</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>or slice part of the <code>paths</code> using slices</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[32]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">targets</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[32]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>list</pre>
</div>

</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The first big difference between the formatting of <code>paths</code> and regular lists of <code>path</code> is that <strong>formatting are applied to each item and joint by space or comma</strong>. For example, whereas a regular list is formatted as a list</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[33]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="n">target_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;b.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;c.txt&#39;</span><span class="p">]</span>
<span class="n">f</span><span class="s2">&quot;{target_list}&quot;</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[33]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#34;[&#39;a.txt&#39;, &#39;b.txt&#39;, &#39;c.txt&#39;]&#34;</pre>
</div>

</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>A <code>paths</code> is formatted as</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[34]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="n">f</span><span class="s2">&quot;{targets}&quot;</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[34]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;a.txt b.txt c.txt&#39;</pre>
</div>

</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>or separated by <code>,</code> with format option <code>","</code></p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[35]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="n">f</span><span class="s2">&quot;{targets:,}&quot;</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[35]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;a.txt,b.txt,c.txt&#39;</pre>
</div>

</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>or after formatting each element with specified formatter</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[36]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="n">f</span><span class="s2">&quot;{targets:r,}&quot;</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[36]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#34;&#39;a.txt&#39;,&#39;b.txt&#39;,&#39;c.txt&#39;&#34;</pre>
</div>

</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>One particular consequence of this format rule is that a <code>sos_targets</code> with only one element will appear the same as a single target so you can use <code>input</code> in place of <code>input[0]</code> if you know there is only one target inside <code>input</code>:</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[37]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="n">single</span> <span class="o">=</span> <span class="n">paths</span><span class="p">(</span><span class="s1">&#39;SoS_Syntax.ipynb&#39;</span><span class="p">)</span>
<span class="n">f</span><span class="s2">&quot;{single[0]} is the same as {single}&quot;</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[37]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;SoS_Syntax.ipynb is the same as SoS_Syntax.ipynb&#39;</pre>
</div>

</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The second feature of the <code>paths</code> object that it will pass unknown attributes to the first <code>path</code> if the object only contains one <code>path</code>. That is to say, in many cases you can <strong>use a <code>paths</code> with only one <code>path</code> just like a <code>path</code> object</strong>.</p>
<p>For example,</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[38]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="n">single</span><span class="o">.</span><span class="n">suffix</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[38]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;.ipynb&#39;</pre>
</div>

</div>

</div>
</div>

</div>
	</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[39]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="n">single</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[39]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>path(&#39;/Users/bpeng1/sos-docs/src/documentation/SoS_Syntax.ipynb&#39;)</pre>
</div>

</div>

</div>
</div>

</div>
	</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[40]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getsize</span><span class="p">(</span><span class="n">single</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[40]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>0</pre>
</div>

</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="File-target-(file_target)">File target (<code>file_target</code>)<a class="anchor-link" href="#File-target-(file_target)">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>A <code>file_target</code> is <code>path</code> and a <code>BaseTarget</code>. It can be created from a string or a <code>path</code>, and because the <code>BaseTarget</code> side of the interface is transparent to the users, it behaves exactly like a <code>path</code>. For this reason, <code>file_target</code> is rarely used directly in SoS scripts.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Target-list-(sos_targets)">Target list (<code>sos_targets</code>)<a class="anchor-link" href="#Target-list-(sos_targets)">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>sos_targets</code> is the type for all SoS system variables such as <code>input</code>, <code>_input</code>, <code>output</code>, <code>_output</code>, <code>depends</code>, <code>_depends</code>. They are created by SoS from <code>input:</code>, <code>output:</code> and <code>depends:</code> statements and are used to, for example, compose scripts in different languages.</p>
<p><code>sos_targets</code> shares the same design as <code>paths</code> although its content is a list of <code>BaseTargets</code>. it can be created from <code>str</code>, <code>list</code>, <code>path</code>, <code>paths</code>, <code>file_targets</code>, and many other <code>BaseTarget</code> types. Although this type is very flexible, it closely resembles <code>paths</code> and share all its features.</p>
<p>For example, the <code>input</code> of the following step is a <code>sos_targets</code> object with a single <code>file_target</code> object, so it will be interpolated as a <code>file_target</code> object (without <code>[ ]</code> for a normal list):</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[41]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="kn">input:</span> <span class="s1">&#39;SoS_Syntax.ipynb&#39;</span>

<span class="kn">sh:</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span>
    <span class="n">wc</span> <span class="o">-</span><span class="n">l</span> <span class="p">{</span><span class="nb">input</span><span class="p">}</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>       0 SoS_Syntax.ipynb
</pre>
</div>
</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>and if you have multiple input files, you can pass them altogether as a <code>sos_targets</code> with two <code>file_target</code></p>

<pre><code>input = sos_targets('SoS_Syntax.ipynb', 'SoS_Magics.ipynb')
_input = sos_targets('SoS_Syntax.ipynb', 'SoS_Magics.ipynb')</code></pre>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[42]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="kn">input:</span> <span class="s1">&#39;SoS_Syntax.ipynb&#39;</span><span class="p">,</span> <span class="s1">&#39;SoS_Magics.ipynb&#39;</span>

<span class="kn">sh:</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span>
    <span class="n">wc</span> <span class="o">-</span><span class="n">l</span> <span class="p">{</span><span class="nb">input</span><span class="p">[</span><span class="mi">0</span><span class="p">]}</span>
    <span class="n">wc</span> <span class="o">-</span><span class="n">l</span> <span class="p">{</span><span class="nb">input</span><span class="p">[</span><span class="mi">1</span><span class="p">]}</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>       0 SoS_Syntax.ipynb
    2923 SoS_Magics.ipynb
</pre>
</div>
</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Or separately as two groups of inputs:</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[43]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="kn">input:</span> <span class="s1">&#39;SoS_Syntax.ipynb&#39;</span><span class="p">,</span> <span class="s1">&#39;SoS_Magics.ipynb&#39;</span><span class="p">,</span> <span class="kp">group_by</span><span class="o">=</span><span class="mi">1</span>

<span class="kn">sh:</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span>
    <span class="n">wc</span> <span class="o">-</span><span class="n">l</span> <span class="p">{</span><span class="n">_input</span><span class="p">}</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>       0 SoS_Syntax.ipynb
    2923 SoS_Magics.ipynb
</pre>
</div>
</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In this case, the step input contains two <code>file_target</code> (</p>

<pre><code>input = sos_targets('SoS_Syntax.ipynb', 'SoS_Magics.ipynb')`</code></pre>
<p>but the step process is executed twice, with</p>

<pre><code>_input = sos_targets('SoS_Syntax.ipynb')
_input = sos_targets('SoS_Magics.ipynb')</code></pre>
<p>respectively. Because <code>_input</code> contains only one element, it is not necessary to use <code>_input[0]</code> in the script.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Parameter-and-environment-specification">Parameter and environment specification<a class="anchor-link" href="#Parameter-and-environment-specification">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Command-line-options">Command line options<a class="anchor-link" href="#Command-line-options">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>SoS allows you to define parameters that accept values from command line options easily.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Optional-arguments">Optional arguments<a class="anchor-link" href="#Optional-arguments">&#182;</a></h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Any variable assignment prefixed with <code>parameter:</code> can accept values from command  line. The format of such lines are</p>

<pre><code># comment
parameter: var_name = default_value</code></pre>
<p>The default value can be integer, float, boolean, string, list of string, or expressions that return values of these types. Other types can be used as long as they can be converted to these types from user-provided values. For example</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[44]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="c1"># path to tool gatk</span>
<span class="kn">parameter:</span> <span class="n">gatk_path</span> <span class="o">=</span> <span class="s1">&#39;~/bin/GATK&#39;</span>
</pre></div>

</div>
</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>defines a variable <code>gatk_path</code> with default value <code>'~/bin/GATK'</code>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>If you execute a workflow without defining <code>gatk_path</code>, the default value will be used</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[45]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">run</span>
<span class="kn">parameter:</span> <span class="n">gatk_path</span> <span class="o">=</span> <span class="s1">&#39;~/bin/GATK&#39;</span>
<span class="k">print</span><span class="p">(</span><span class="n">gatk_path</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>~/bin/GATK
</pre>
</div>
</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>You can set this parameter from command line using option <code>--gatk_path</code></p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[46]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">run</span> <span class="o">--</span><span class="n">gatk_path</span> <span class="o">/</span><span class="n">my</span><span class="o">/</span><span class="n">GATK</span>
<span class="kn">parameter:</span> <span class="n">gatk_path</span> <span class="o">=</span> <span class="s1">&#39;~/bin/GATK&#39;</span>
<span class="k">print</span><span class="p">(</span><span class="n">gatk_path</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>/my/GATK
</pre>
</div>
</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>You can also use <code>-</code> in place of <code>_</code> in command line, although the variable name cannot have <code>-</code> in it.</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[47]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">run</span> <span class="o">--</span><span class="n">gatk</span><span class="o">-</span><span class="n">path</span> <span class="o">/</span><span class="n">my</span><span class="o">/</span><span class="n">GATK</span>
<span class="kn">parameter:</span> <span class="n">gatk_path</span> <span class="o">=</span> <span class="s1">&#39;~/bin/GATK&#39;</span>
<span class="k">print</span><span class="p">(</span><span class="n">gatk_path</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>/my/GATK
</pre>
</div>
</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The default value of the parameter determines the type of values it accepts. For example, the following command yields an error because the parameter expects an integer (from default value <code>0</code>) but a string is passed.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[48]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">sandbox</span> <span class="o">--</span><span class="n">expect</span><span class="o">-</span><span class="n">error</span>

<span class="o">%</span><span class="n">run</span> <span class="o">--</span><span class="n">cutoff</span> <span class="n">zero</span>
<span class="kn">parameter:</span> <span class="n">cutoff</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stderr output_text">
<pre>ArgumentError: argument --cutoff: invalid int value: &#39;zero&#39;
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Simiarly, a list would be created if the parameter has a default value of type list</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[49]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">run</span> <span class="o">--</span><span class="n">sample</span><span class="o">-</span><span class="n">names</span> <span class="n">A</span>
<span class="kn">parameter:</span> <span class="n">sample_names</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">print</span><span class="p">(</span><span class="n">sample_names</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>[&#39;A&#39;]
</pre>
</div>
</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Finally, the convention to specify <code>True</code> or <code>False</code> of a boolean parameter is to use <code>--no-PARAM</code> for <code>PARAM=False</code>. For example,</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[50]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">run</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">trim</span>
<span class="kn">parameter:</span> <span class="n">trim</span><span class="o">=</span><span class="bp">True</span>
<span class="k">print</span><span class="p">(</span><span class="n">trim</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>False
</pre>
</div>
</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Required-arguments">Required arguments<a class="anchor-link" href="#Required-arguments">&#182;</a></h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In cases where there is no suitable default values and/or command line arguments are mandatory, you can specify a parameter without initial value, and the parameter will be considered required. By default, the parameter will be considered to be of a single value with <code>str</code> type.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[51]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">sandbox</span> <span class="o">--</span><span class="n">expect</span><span class="o">-</span><span class="n">error</span>

<span class="kn">parameter:</span> <span class="n">cutoff</span> 
<span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;cutoff = {cutoff} of type {type(cutoff).__name__}&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stderr output_text">
<pre>ArgumentError: Argument cutoff of type str is required
</pre>
</div>
</div>

</div>
</div>

</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[52]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">run</span> <span class="o">--</span><span class="n">cutoff</span> <span class="mi">100</span>
<span class="kn">parameter:</span> <span class="n">cutoff</span> 
<span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;cutoff = {cutoff} of type {type(cutoff).__name__}&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>cutoff = 100 of type str
</pre>
</div>
</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>If you would like to specify a type, you can use the Python type hint to annotate the variable with a type</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[53]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">run</span> <span class="o">--</span><span class="n">cutoff</span> <span class="mi">100</span>
<span class="kn">parameter:</span> <span class="n">cutoff</span> <span class="p">:</span> <span class="nb">int</span>
<span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;cutoff = {cutoff} of type {type(cutoff).__name__}&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>cutoff = 100 of type int
</pre>
</div>
</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Currently SoS only accepts simple type hints such as <code>int</code>, <code>str</code>, <code>float</code>, <code>list</code> and only list of strings are supported:</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[54]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">run</span> <span class="o">--</span><span class="n">bam</span><span class="o">-</span><span class="n">files</span> <span class="n">A</span><span class="o">.</span><span class="n">bam</span> <span class="n">B</span><span class="o">.</span><span class="n">bam</span>
<span class="c1"># input bam files</span>
<span class="kn">parameter:</span> <span class="n">bam_files</span> <span class="p">:</span> <span class="nb">list</span>
<span class="k">print</span><span class="p">(</span><span class="n">bam_files</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>[&#39;A.bam&#39;, &#39;B.bam&#39;]
</pre>
</div>
</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>It is worth noting that you can specify type hint also for parameters with initial values but SoS will use type of the default values and ignore type hints in this case. For example, in the following case when a parameter with default value 10 are given a type hint of <code>list</code>, it will accept input as integers.</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[55]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">run</span> <span class="o">--</span><span class="n">cutoff</span> <span class="mi">100</span>
<span class="kn">parameter:</span> <span class="n">cutoff</span> <span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="mi">10</span>
<span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;cutoff = {cutoff} of type {type(cutoff).__name__}&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>cutoff = 100 of type int
</pre>
</div>
</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Configuration-files">Configuration files<a class="anchor-link" href="#Configuration-files">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>SoS reads configurations from</p>
<ul>
<li>A site configuration file <code>site_config.yml</code> under the sos package directory</li>
<li>A host configuration file <code>~/.sos/hosts.yml</code></li>
<li>A global sos configuration file <code>~/.sos/config.yml</code></li>
<li>And a configuration file specified by command line option <code>-c</code>.</li>
</ul>
<p>The configuration files should be in <a href="http://www.yaml.org/start.html">YAML format</a>. Dictionaries defined in all these configuration files are merged to form a single dictionary that is available to SoS as a dictionary named <code>CONFIG</code>.</p>
<p>Note that:</p>
<ul>
<li>All configurations from the aforementioned files are merged to a single dictionary. A dictionary could therefore contain keys defined in different configuration files and a latter file could overwrite keys defined in a previous file. For example, if <ul>
<li><code>{'A': {'B': 'old', 'C': 'old'}</code> is defined in <code>~/.sos/config.yml</code> and</li>
<li><code>{'A': {'B': 'new', 'D': 'new'}</code> is defined in <code>my_config.yml</code>, then</li>
<li>dictionary <code>A</code> in <code>CONFIG</code> would have value <code>{'B': 'new', 'C': 'old', 'D': 'new'}</code>. </li>
</ul>
</li>
<li>SoS interpolate string values in <code>CONFIG</code> if they contain <code>{ }</code>. The expressions enclosed by <code>{ }</code> would be evaluated with a local namespace that is the dictionary in which the key exists, and a global namespace that is the complete <code>CONFIG</code> dictionary. That is to say, if a configuration file contains
<pre><code>user_name: user
hosts:
  cluster:
    address: "{user_name}@domain.com:{port}"
    port: 123</code></pre>
<code>CONFIG['hosts']['cluster']['address']</code> would be interpolated with <code>port</code> from the <code>CONFIG['host']['cluster']</code> and <code>user_name</code> from the top level <code>CONFIG['user_name']</code>. You will need to double the braces (<code>{{ }}</code> to include <code>{ }</code> in the config file.</li>
<li>Because key <code>user_name</code> is frequently used in <code>hosts.yml</code>, SoS automatically defines <code>user_name</code> as the local user ID (all lower case) in <code>CONFIG</code> if it is not defined in any of the configuration files.</li>
<li>A special key <code>based_on</code> will be processed after all configuration files are loaded. The value of <code>based_on</code> should be one or more keys to other dictionaries in the configuration (e.g. <code>hosts.cluster</code>. The consequence of this key is that the items from the referred dictionaries would be merged to the present dictionary if they do not exist in the present dictionary. This allows you to derive a dictionary from an existing one. For example, 
<pre><code>hosts:
  head_node:
    description: head_node of cluster
    address: "{user_name}@domain.com:{port}"
    port: 123
    paths:
        home:   "/home/{user_name}"
  cluster:
    description: Cluster
    based_on: hosts.head_node
    queue_type: pbs</code></pre>
 allows <code>hosts["cluster"]</code> to be derived from <code>hosts["head_node"]</code>.</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Native-SoS-file-format">Native SoS file format<a class="anchor-link" href="#Native-SoS-file-format">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>A sos script can be defined in a plain text file. A <code>.sos</code> suffix is recommended but not required. A SoS script consists of <strong>sections</strong> that define <strong>steps</strong> of one or more <strong>workflows</strong>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>A SoS script usually starts with lines</p>
<div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env sos-runner</span>
<span class="c1">#fileformat=SOS1.0</span>
</pre></div>
<p>The first line allows the script to be executed by command <code>sos-runner</code> if it is executed as an executable script. The second line tells SoS the format of the script. The <code>#fileformat</code> line does not have to be the first or second line but should be in the first comment block. The latest version of SOS format is assumed if no format line is present so it is a good practice to specify version of file format to make sure the script is interpreted correctly.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Global-sections-and-default-variables">Global sections and default variables<a class="anchor-link" href="#Global-sections-and-default-variables">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Global sections can be defined without section header in a <code>.sos</code> file as statements before any other section, and as a regular section with header <code>[global]</code>. The global sections are the only section that appear multiple times in a SoS script.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Definitions in the global section are shared by all sections so it is usually used to define global variables and parameters. SoS implicitly defines the following variables in the global section:</p>
<ul>
<li><strong><code>SOS_VERSION</code></strong>: version of SoS interpreter.</li>
<li><strong><code>CONFIG</code></strong>: configurations read from site, hosts, global, local and user specific configuration files.</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="SoS-Sections">SoS Sections<a class="anchor-link" href="#SoS-Sections">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>A SoS section is marked by a section header in the format of</p>

<pre><code>[names: options]</code></pre>
<p>The header should start with a <code>[</code> from the beginning of a line and end with a <code>]</code>. It can contain one or more names with optional description (for each step) and section options (for all steps defined in the section).</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Section names of a section follow the following rules:</p>
<table>
<thead><tr>
<th>Format</th>
<th>Example</th>
<th>Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>name_index</code></strong></td>
<td><code>human_10</code></td>
<td>Defines step <code>index</code> of workflow <code>name</code>. Here <code>name</code> can be any name with alpha-numeric characters and <code>-</code> and <code>_</code>. <code>index</code> should be a non-negative number.</td>
</tr>
<tr>
<td><strong><code>name</code></strong></td>
<td><code>update-website</code></td>
<td>Section name without index is equivalent to <code>name_0</code></td>
</tr>
<tr>
<td><strong><code>index</code></strong></td>
<td><code>10</code></td>
<td>Section name without workflow name is equivalent to <code>default_index</code></td>
</tr>
<tr>
<td><strong><code>pattern_index</code></strong></td>
<td><code>*_0</code>, <code>human*_10</code></td>
<td>Equivalent to step <code>index</code> of all matching workflows defined in the script. The <code>pattern</code> should follow <a href="https://docs.python.org/2/library/fnmatch.html">Unix filename matching</a></td>
</tr>
<tr>
<td><strong><code>stepname (desc)</code></strong></td>
<td><code>10 (align)</code></td>
<td>Optional short description can be used to describe the goal of the step</td>
</tr>
<tr>
<td><strong><code>name1,name2,...</code></strong></td>
<td><code>human_10,mouse_10</code></td>
<td>Comma separated names define multiple steps for one or more workflows</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>A SoS step accepts the following options:</p>
<table>
<thead><tr>
<th>Name</th>
<th>Example</th>
<th>Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>skip</code></strong></td>
<td><code>skip</code><br><code>skip=False</code></td>
<td>Always or conditionally skip a step, <code>expr</code> should be evaluated as <code>True</code> or <code>False</code></td>
</tr>
<tr>
<td><strong><code>shared</code></strong></td>
<td><code>shared='K'</code><br><code>shared={'K': 'output[0]'}</code></td>
<td>Variable that will be made available to the workflow after completion of the step</td>
</tr>
<tr>
<td><strong><code>provides</code></strong></td>
<td><code>provides='filename'</code><br><code>provides=executable('fastqc')</code><br><code>provides='{filename}.bam.gz'</code><br><code>provides=['A1.txt', 'A2.txt']</code></td>
<td>Targets that will be generated after the completion of the step. This option turns the step to an auxiliary step that will be executed when the provided target is needed.</td>
</tr>
</tbody>
</table>
<p>Please refer to section <a href="SoS_Step.html">SoS Step</a> for more details on these options.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>A section can have arbitrary Python statements and SoS-specific statements that define the input, output, and dependent targets, and external tasks of the step.</p>
<table>
<thead><tr>
<th>Keyword</th>
<th>Examples</th>
<th>Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>input</code></strong></td>
<td>(unspecified)<br> <code>input: 'test1.txt', 'text2.txt'</code><br><code>input: '*.txt'</code> <br> <code>input: dynamic('*.txt')</code></td>
<td>Input targets of the step, which can be derived from previous step (if unspecified), determined in advanced or only before the step is executed.</td>
</tr>
<tr>
<td><strong><code>depends</code></strong></td>
<td><code>depends: 'hg19.fa'</code><br><code>depends: f"{_input}.idx"</code><br><code>depends: R_library('ggplot2')</code></td>
<td>Step depends on a specified files or targets to execute</td>
</tr>
<tr>
<td><strong><code>output</code></strong></td>
<td>(unspecified) <br><code>output: 'output.bam'</code><br><code>output: f'{_input}.idx'</code></td>
<td>Step has no or specified defined output that can be derived from input files</td>
</tr>
<tr>
<td><strong><code>task</code></strong></td>
<td><code>task:</code></td>
<td>Statements following the statement will be executed as an external task</td>
</tr>
</tbody>
</table>
<p>These statements accept a large number of options to specify how input, output targets are processed and how external tasks are executed. Please refer to section <a href="SoS_Step.html">SoS step</a> for more details about different types of steps and step options, and section <a href="Remote_Execution.html">Remote Exection</a> on topics related to external tasks.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>As an example for a complete script, the following script defines a workflow with a global section without header, and a workflow <code>gff</code> with two steps</p>
<div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env sos-runner</span>
<span class="c1">#fileformat=SOS1.0</span>

<span class="n">local_resource</span> <span class="o">=</span> <span class="s1">&#39;~/Resource/&#39;</span>
<span class="n">data_dir</span>       <span class="o">=</span> <span class="s1">&#39;~/Data/bams/&#39;</span>
<span class="n">resource_dir</span>   <span class="o">=</span> <span class="n">f</span><span class="s1">&#39;{local_resource}/resources/hg19/Ensembl/Genes&#39;</span>

<span class="c1"># samples to be processed</span>
<span class="kn">parameter:</span> <span class="n">samples</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;s312&#39;</span><span class="p">,</span> <span class="s1">&#39;s315&#39;</span><span class="p">,</span> <span class="s1">&#39;s312a&#39;</span><span class="p">,</span> <span class="s1">&#39;s315a&#39;</span><span class="p">]</span>

<span class="p">[</span><span class="n">gff_0</span><span class="p">]</span>
<span class="c1"># download gene models from the MISO website</span>
<span class="kn">output:</span> <span class="n">f</span><span class="s1">&#39;{resource_dir}/Home_sapiens.GRCh37.65.gff.zip&#39;</span>
<span class="kn">download:</span> <span class="n">dest_dir</span><span class="o">=</span><span class="n">resource_dir</span><span class="p">,</span> <span class="n">decompress</span><span class="o">=</span><span class="bp">True</span>
    <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">genes</span><span class="o">.</span><span class="n">mit</span><span class="o">.</span><span class="n">edu</span><span class="o">/</span><span class="n">burgelab</span><span class="o">/</span><span class="n">miso</span><span class="o">/</span><span class="n">annotations</span><span class="o">/</span><span class="n">gene</span><span class="o">-</span><span class="n">models</span><span class="o">/</span><span class="n">Homo_sapiens</span><span class="o">.</span><span class="n">GRCh37</span><span class="o">.</span><span class="mf">65.</span><span class="n">gff</span><span class="o">.</span><span class="n">zip</span>

<span class="p">[</span><span class="n">gff_1</span><span class="p">]</span>
<span class="c1"># Index gtf file using index_gff</span>
<span class="kn">output:</span> <span class="n">f</span><span class="s1">&#39;{resource_dir}/{hg19_gff_index}/genes.gff&#39;</span>
<span class="kn">task:</span>   <span class="n">working_dir</span><span class="o">=</span><span class="n">resource_dir</span>
<span class="kn">run:</span>    <span class="n">docker_image</span><span class="o">=</span><span class="s1">&#39;mdabioinfo/miso:latest&#39;</span>
    <span class="n">rm</span> <span class="o">-</span><span class="n">rf</span> <span class="p">{</span><span class="n">hg19_gff_index</span><span class="p">}</span>
    <span class="n">index_gff</span> <span class="o">--</span><span class="n">index</span> <span class="p">{</span><span class="n">hg19_gff_file</span><span class="p">}</span> <span class="p">{</span><span class="n">hg19_gff_index</span><span class="p">}</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Jupyter-notebook-format">Jupyter notebook format<a class="anchor-link" href="#Jupyter-notebook-format">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>SoS provides a Jupyter frontend in which you can execute sos steps and workflows interactively or in batch mode. The Jupyter notebook format <code>.ipynb</code> can contain <strong>markdown cells</strong> and <strong>code cells</strong> with statements in SoS and any other supported languages (e.g. <code>R</code>).</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>One or more SoS workflows can be defined in a <code>.ipynb</code> file from <strong>code cells in SoS kernel that start with section headers</strong>. For example, the same workflow defined in the <code>.sos</code> file could be defined in a Jupyter notebook, with cells starting with section headers as follows:</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[56]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="p">[</span><span class="k">global</span><span class="p">]</span>
<span class="n">local_resource</span> <span class="o">=</span> <span class="s1">&#39;~/Resource/&#39;</span>
<span class="n">data_dir</span>       <span class="o">=</span> <span class="s1">&#39;~/Data/bams/&#39;</span>
<span class="n">resource_dir</span>   <span class="o">=</span> <span class="n">f</span><span class="s1">&#39;{local_resource}/resources/hg19/Ensembl/Genes&#39;</span>

<span class="c1"># samples to be processed</span>
<span class="kn">parameter:</span> <span class="n">samples</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;s312&#39;</span><span class="p">,</span> <span class="s1">&#39;s315&#39;</span><span class="p">,</span> <span class="s1">&#39;s312a&#39;</span><span class="p">,</span> <span class="s1">&#39;s315a&#39;</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

</div>
	</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[57]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="p">[</span><span class="n">gff_0</span><span class="p">]</span>
<span class="c1"># download gene models from the MISO website</span>
<span class="kn">output:</span> <span class="n">f</span><span class="s1">&#39;{resource_dir}/Home_sapiens.GRCh37.65.gff.zip&#39;</span>
<span class="kn">download:</span> <span class="n">dest_dir</span><span class="o">=</span><span class="n">resource_dir</span><span class="p">,</span> <span class="n">decompress</span><span class="o">=</span><span class="bp">True</span>
    <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">genes</span><span class="o">.</span><span class="n">mit</span><span class="o">.</span><span class="n">edu</span><span class="o">/</span><span class="n">burgelab</span><span class="o">/</span><span class="n">miso</span><span class="o">/</span><span class="n">annotations</span><span class="o">/</span><span class="n">gene</span><span class="o">-</span><span class="n">models</span><span class="o">/</span><span class="n">Homo_sapiens</span><span class="o">.</span><span class="n">GRCh37</span><span class="o">.</span><span class="mf">65.</span><span class="n">gff</span><span class="o">.</span><span class="n">zip</span>
</pre></div>

</div>
</div>
</div>

</div>
	</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[58]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="c1"># This is step 1 of the gff workflow</span>
<span class="p">[</span><span class="n">gff_1</span><span class="p">]</span>
<span class="c1"># Index gtf file using index_gff</span>
<span class="kn">output:</span> <span class="n">f</span><span class="s1">&#39;{resource_dir}/{hg19_gff_index}/genes.gff&#39;</span>
<span class="kn">task:</span>   <span class="n">working_dir</span><span class="o">=</span><span class="n">resource_dir</span>
<span class="kn">run:</span>    <span class="n">docker_image</span><span class="o">=</span><span class="s1">&#39;mdabioinfo/miso:latest&#39;</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span>
    <span class="n">rm</span> <span class="o">-</span><span class="n">rf</span> <span class="p">{</span><span class="n">hg19_gff_index</span><span class="p">}</span>
    <span class="n">index_gff</span> <span class="o">--</span><span class="n">index</span> <span class="p">{</span><span class="n">hg19_gff_file</span><span class="p">}</span> <span class="p">{</span><span class="n">hg19_gff_index</span><span class="p">}</span>
</pre></div>

</div>
</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Note that</p>
<ul>
<li>SoS cells that start with section header (after optional comments, empty lines, and magics) are <strong>workflow cells</strong>. These cells are excluded from usual cell evaluation but can be executed using magics <code>%run</code> and <code>%sosrun</code>.  </li>
<li>The <code>[global]</code> section header is needed for the global section to be recognized as part of a workflow.</li>
<li>A cell can define one or more steps, even a complete workflow.</li>
</ul>
<p>SoS commands such as <code>sos run</code> and <code>sos-runner</code> can execute workflows defined in <code>.ipynb</code> files directly.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Workflow-Specification">Workflow Specification<a class="anchor-link" href="#Workflow-Specification">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Forward-style-workflows">Forward-style workflows<a class="anchor-link" href="#Forward-style-workflows">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>A SoS forward-style workflow has a name and one or more numbered steps. The workflows are defined from sections in a SoS script.</p>
<p>For example, the following sections specify a workflow with four steps <code>5</code>, <code>10</code>, <code>20</code>, and <code>100</code>. The workflow steps can be specified in any order and do not have to be consecutive.</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[59]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
<span class="p">[</span><span class="mi">20</span><span class="p">]</span>
<span class="p">[</span><span class="mi">10</span><span class="p">]</span>
<span class="p">[</span><span class="mi">100</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>A workflow specified in this way is the <strong><code>default</code></strong> workflow and is actually called <code>default</code> in SoS output. You can specify a workflow with name and give each step a short description as follows:</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[60]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="p">[</span><span class="n">mapping_5</span> <span class="p">(</span><span class="n">get</span> <span class="n">data</span><span class="p">)]</span>
<span class="p">[</span><span class="n">mapping_20</span> <span class="p">(</span><span class="n">align</span><span class="p">)]</span>
<span class="p">[</span><span class="n">mapping_10</span> <span class="p">(</span><span class="n">quality</span> <span class="n">control</span><span class="p">)]</span>
<span class="p">[</span><span class="n">mapping_100</span> <span class="p">(</span><span class="n">generate</span> <span class="n">report</span><span class="p">)]</span>
</pre></div>

</div>
</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>A SoS script can define multiple workflows. For example, the following sections of SoS script defines two workflows named <code>mouse</code> and <code>human</code>.</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[61]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="p">[</span><span class="n">mouse_10</span><span class="p">]</span>
<span class="p">[</span><span class="n">mouse_20</span><span class="p">]</span>
<span class="p">[</span><span class="n">mouse_30</span><span class="p">]</span>
<span class="p">[</span><span class="n">human_10</span><span class="p">]</span>
<span class="p">[</span><span class="n">human_20</span><span class="p">]</span>
<span class="p">[</span><span class="n">human_30</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In this case, a command line option is needed to specify workflow name. This can be done by magic <code>%run</code> in Jupyter notebook, or a positional argument from the command line, e.g.</p>

<pre><code>    % sos run myscript mouse</code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Note that the workflow argument is not needed if a <code>default</code> workflow is defined in the script like the following example</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[62]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="p">[</span><span class="mi">10</span><span class="p">]</span>
<span class="p">[</span><span class="mi">20</span><span class="p">]</span>
<span class="p">[</span><span class="mi">30</span><span class="p">]</span>
<span class="p">[</span><span class="n">test_10</span><span class="p">]</span>
<span class="p">[</span><span class="n">test_20</span><span class="p">]</span>
<span class="p">[</span><span class="n">test_30</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Multiple steps can share a single step as follows</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[63]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="p">[</span><span class="n">mouse_10</span><span class="p">,</span><span class="n">human_10</span><span class="p">]</span>
<span class="p">[</span><span class="n">mouse_20</span><span class="p">]</span>
<span class="p">[</span><span class="n">human_20</span><span class="p">]</span>
<span class="p">[</span><span class="n">mouse_30</span><span class="p">,</span><span class="n">human_30</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>and wildcard steps can be used to define a step for multiple workflows:</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[64]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">run</span> <span class="n">mouse</span>
<span class="p">[</span><span class="o">*</span><span class="n">_10</span><span class="p">]</span>
<span class="p">[</span><span class="n">mouse_20</span><span class="p">]</span>
<span class="p">[</span><span class="n">human_20</span><span class="p">]</span>
<span class="p">[</span><span class="o">*</span><span class="n">_30</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>If the steps defined in a shared section is similar but not identical, it can use step variable (discussed elsewhere) <code>step_name</code> to behave differently in different workflows. In the following example, the variable <code>step_name</code> will be <code>mouse_20</code> or <code>human_20</code> depending on the workflow being executed, and is used to determine the correct reference genome for different workflows.</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[65]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="p">[</span><span class="n">mouse_20</span><span class="p">,</span><span class="n">human_20</span><span class="p">]</span>
<span class="n">reference</span> <span class="o">=</span> <span class="s2">&quot;/path/to/mouse/reference&quot;</span> <span class="k">if</span> \
  <span class="n">step_name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;mouse&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="s2">&quot;/path/to/human/reference&quot;</span>

<span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Reference genome {reference} is used&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Sub--and-combined-workflows">Sub- and combined workflows<a class="anchor-link" href="#Sub--and-combined-workflows">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Although workflows are defined separately with all their steps, they do not have to be executed in their entirety. A <code>subworkflow</code> refers to a workflow that is defined from one or more steps of an existing workflows. It is specified using syntax <code>workflow:[from-to]</code> where <code>from-to</code> can be <code>n</code> (step <code>n</code>), <code>-n</code> (up to <code>n</code>), <code>n-m</code> (step <code>n</code> to <code>m</code>) and <code>m-</code> (from <code>m</code>). For example</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<div class="highlight"><pre><span></span><span class="n">A</span>              <span class="c1"># complete workflow A</span>
<span class="kn">A:</span><span class="mi">5</span><span class="o">-</span><span class="mi">10</span>         <span class="c1"># step 5 to 10 of A</span>
<span class="kn">A:</span><span class="mi">50</span><span class="o">-</span>          <span class="c1"># step 50 up</span>
<span class="kn">A:</span><span class="o">-</span><span class="mi">10</span>          <span class="c1"># up to step 10 of A</span>
<span class="kn">A:</span><span class="mi">10</span>           <span class="c1"># step 10 of workflow A</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In practice, the <code>-n</code> format is frequently used to execute part of the workflow for debudding purposes, for example:</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[66]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">run</span> <span class="n">default</span><span class="p">:</span><span class="o">-</span><span class="mi">20</span>
<span class="p">[</span><span class="mi">10</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">step_name</span><span class="p">)</span>
<span class="p">[</span><span class="mi">20</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">step_name</span><span class="p">)</span>
<span class="p">[</span><span class="mi">30</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">step_name</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>default_10
default_20
</pre>
</div>
</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>You can also combine subworkflows to execute multiple workflows one after another. For example,</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<div class="highlight"><pre><span></span><span class="n">A</span> <span class="o">+</span> <span class="n">B</span>          <span class="c1"># workflow A, followed by B</span>
<span class="kn">A:</span><span class="mi">0</span> <span class="o">+</span> <span class="n">B</span>        <span class="c1"># step 0 of A, followed by B</span>
<span class="kn">A:</span><span class="o">-</span><span class="mi">50</span> <span class="o">+</span> <span class="n">B</span> <span class="o">+</span> <span class="n">C</span>  <span class="c1"># up to step 50 of workflow A, followed by B, and C</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This syntax can be used from the command line, e.g.</p>
<div class="highlight"><pre><span></span>sos-runner myscript align+call
</pre></div>
<p>or from the <code>%run</code> magic of Jupyter notebook</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[67]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="c1">#local run</span>
<span class="o">%</span><span class="n">run</span> <span class="n">check</span><span class="o">+</span><span class="n">align</span><span class="o">+</span><span class="n">call</span>
<span class="p">[</span><span class="n">check_10</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">step_name</span><span class="p">)</span>
<span class="p">[</span><span class="n">align_10</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">step_name</span><span class="p">)</span>
<span class="p">[</span><span class="n">align_20</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">step_name</span><span class="p">)</span>
<span class="p">[</span><span class="n">call_10</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">step_name</span><span class="p">)</span>
<span class="p">[</span><span class="n">call_20</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">step_name</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>check_10
align_10
align_20
call_10
call_20
</pre>
</div>
</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Nested-workflow-(sos_run)">Nested workflow (<code>sos_run</code>)<a class="anchor-link" href="#Nested-workflow-(sos_run)">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>SoS also supports nested workflow in which a complete workflow is treated as part of a step process.
The workflow is execute by SoS action <code>sos_run</code>, e.g.</p>
<div class="highlight"><pre><span></span><span class="n">sos_run</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">)</span>            <span class="c1"># execute workflow A</span>
<span class="n">sos_run</span><span class="p">(</span><span class="s1">&#39;A + B&#39;</span><span class="p">)</span>        <span class="c1"># execute workflow B after A</span>
<span class="n">sos_run</span><span class="p">(</span><span class="s1">&#39;D:-10 + C&#39;</span><span class="p">)</span>    <span class="c1"># execute up to step 10 of D and workflow C</span>

<span class="c1"># execute user-specified aligner and caller workflows</span>
<span class="n">sos_run</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;{aligner} + {caller}&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In its simplest form, nested workflow allows you to define another workflow from existing ones. For example,</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[68]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">preview</span> <span class="o">-</span><span class="n">n</span> <span class="n">forward</span><span class="o">.</span><span class="n">dot</span>
<span class="o">%</span><span class="n">run</span> <span class="o">-</span><span class="n">d</span> <span class="n">forward</span>
<span class="p">[</span><span class="n">align_10</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">step_name</span><span class="p">)</span>
<span class="p">[</span><span class="n">align_20</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">step_name</span><span class="p">)</span>
<span class="p">[</span><span class="n">call_10</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">step_name</span><span class="p">)</span>
<span class="p">[</span><span class="n">call_20</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">step_name</span><span class="p">)</span>
<span class="p">[</span><span class="n">default</span><span class="p">]</span>
<span class="n">sos_run</span><span class="p">(</span><span class="s1">&#39;align+call&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>align_10
align_20
call_10
call_20
</pre>
</div>
</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div class="sos_hint">> forward.dot (123 B):</div>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>




<div class="output_png output_subarea ">
<img src="data:image/png;base64,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"
>
</div>

</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>defines a nested workflow that combines workflows <code>align</code> and <code>call</code> so that the workflow will by default execute two workflows, but can also execute one of them as separate workflows <code>align</code> and <code>call</code>. This example also uses option <code>-d</code> to output the execution path of the workflow to a file, and magic <code>%preview</code> to preview the path.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Nested workflow also allows you to define multiple mini-workflows and connect them freely. For example</p>
<div class="highlight"><pre><span></span><span class="p">[</span><span class="n">a_1</span><span class="p">]</span>
<span class="p">[</span><span class="n">a_2</span><span class="p">]</span>
<span class="p">[</span><span class="n">b</span><span class="p">]</span>
<span class="p">[</span><span class="n">c</span><span class="p">]</span>
<span class="p">[</span><span class="n">d_1</span><span class="p">]</span>
<span class="n">sos_run</span><span class="p">(</span><span class="s1">&#39;a+b&#39;</span><span class="p">)</span>
<span class="p">[</span><span class="n">d_2</span><span class="p">]</span>
<span class="n">sos_run</span><span class="p">(</span><span class="s1">&#39;a+c&#39;</span><span class="p">)</span>
</pre></div>
<p>defines workflows <code>d</code> that will execute steps <code>d_1</code>, <code>a_1</code>, <code>a_2</code>, <code>b_0</code>, <code>d_2</code>,  <code>a_1</code>, <code>a_2</code>, and <code>c_0</code>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>A <code>parameter</code> statement usually gets its value from command line. However, when a workflow is executed as a subworkflow by action <code>sos_run</code>, the <code>parameter</code> statement can get its value from the <code>args</code> or <code>**kwargs</code> parameters of <code>sos_run</code>.</p>
<p>For example, when the <code>default</code> workflow of the following script is executed, <code>cutoff</code> takes its default value of <code>10</code>.</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[69]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">run</span>
<span class="p">[</span><span class="n">default_1</span><span class="p">]</span>
<span class="kn">parameter:</span> <span class="n">cutoff</span><span class="o">=</span><span class="mi">10</span>
<span class="kn">run:</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span>
  <span class="n">echo</span> <span class="p">{</span><span class="n">cutoff</span><span class="p">}</span>

<span class="p">[</span><span class="n">batch</span><span class="p">]</span>
<span class="k">for</span> <span class="n">cutoff</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
    <span class="n">sos_run</span><span class="p">(</span><span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="n">cutoff</span><span class="o">=</span><span class="n">cutoff</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>echo 10
10

</pre>
</div>
</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>A command line argument can be used to set this parameter to <code>8</code>,</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[70]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">rerun</span> <span class="o">--</span><span class="n">cutoff</span> <span class="mi">8</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>echo 8
8

</pre>
</div>
</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now, if the workflow is called as a subworkflow of step <code>batch</code>, <code>sos_run</code> set up the environment so that the statement <code>parameter: cutoff=10</code> gets a different cutoff value pass by  <code>sos_run</code>.</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[71]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">rerun</span> <span class="n">batch</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>echo 0
0

echo 1
1

echo 2
2

</pre>
</div>
</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Because <code>sos_run</code> is simply a SoS action and takes a string as its parameter, it allows very flexible ways to compose (e.g. determine workflow from command line arguments) and execute (e.g. repeated execution of workflows with different options or input files) complex workflows. Furthermore, the workflows can be defined in another file so you can organize your workflow as a master workflow that calls nested workflows defined in other files.</p>
<p>For example, suppose we create a workflow with two steps:</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[72]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">preview</span> <span class="o">-</span><span class="n">n</span> <span class="n">nested</span><span class="o">.</span><span class="n">sos</span>
<span class="o">%</span><span class="n">run</span>

<span class="p">[</span><span class="mi">10</span><span class="p">]</span>
<span class="kn">report:</span> <span class="n">output</span><span class="o">=</span><span class="s1">&#39;nested.sos&#39;</span>
  <span class="p">[</span><span class="n">nested_20</span><span class="p">]</span>
  <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;This is {step_name} of a nested workflow&quot;</span><span class="p">)</span>
  
  <span class="p">[</span><span class="n">nested_30</span><span class="p">]</span>
  <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;This is {step_name} of a nested workflow&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div class="sos_hint">> nested.sos (128 B):</div>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>[nested_20]
print(f&#34;This is {step_name} of a nested workflow&#34;)

[nested_30]
print(f&#34;This is {step_name} of a nested workflow&#34;)
</pre>
</div>
</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Then, we can execute this workflow with a <code>sos_run</code> action as follows</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[73]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="n">sos_run</span><span class="p">(</span><span class="s1">&#39;nested&#39;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s1">&#39;nested.sos&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>This is nested_20 of a nested workflow
This is nested_30 of a nested workflow
</pre>
</div>
</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Makefile-style-workflow">Makefile-style workflow<a class="anchor-link" href="#Makefile-style-workflow">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Using <strong>auxiliary steps</strong> that are only executed to provide desired output, a SoS workflow can be constructed dynamically to produce the specified target. For example, the following pipeline does not have any numbered steps and is triggered by option <code>-t test.vcf</code> (target).</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[74]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">sandbox</span>
<span class="c1"># preview multiple DAG</span>
<span class="o">%</span><span class="n">preview</span> <span class="o">-</span><span class="n">n</span> <span class="n">target</span><span class="o">*.</span><span class="n">dot</span>
<span class="err">!</span><span class="n">touch</span> <span class="n">test</span><span class="o">.</span><span class="n">bam</span>

<span class="o">%</span><span class="n">run</span> <span class="o">-</span><span class="n">t</span> <span class="n">test</span><span class="o">.</span><span class="n">vcf</span> <span class="o">-</span><span class="n">d</span> <span class="n">target</span>

<span class="c1"># this step provides variable `var`</span>
<span class="p">[</span><span class="n">index</span><span class="p">:</span> <span class="kp">provides</span><span class="o">=</span><span class="s1">&#39;{filename}.bam.bai&#39;</span><span class="p">]</span>
<span class="kn">input:</span> <span class="n">f</span><span class="s2">&quot;{filename}.bam&quot;</span>
<span class="kn">run:</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span>
   <span class="n">echo</span> <span class="s2">&quot;Generating {output}&quot;</span>
   <span class="n">touch</span> <span class="p">{</span><span class="n">output</span><span class="p">}</span>

<span class="p">[</span><span class="n">call</span><span class="p">:</span> <span class="kp">provides</span><span class="o">=</span><span class="s1">&#39;{filename}.vcf&#39;</span><span class="p">]</span>
<span class="kn">input:</span>   <span class="n">f</span><span class="s2">&quot;{filename}.bam&quot;</span>
<span class="kn">depends:</span> <span class="n">f</span><span class="s2">&quot;{input}.bai&quot;</span>
<span class="kn">run:</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span>
   <span class="n">echo</span> <span class="s2">&quot;Calling variants from {input} with {depends} to {output}&quot;</span>
   <span class="n">touch</span> <span class="p">{</span><span class="n">output</span><span class="p">}</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stderr output_text">
<pre>exists() takes 1 positional argument but 2 were given
</pre>
</div>
</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div class="sos_hint">> target.dot (118 B):</div>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>




<div class="output_png output_subarea ">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQUAAACbCAYAAABrjY4WAAAAAXNSR0IArs4c6QAAKG5JREFUeAHtnQfUHLURgGUwvfcOppmO6Q6EYlNM7z0UmxYgPGqAACHAAxJI6JhQA4YECIHQe6+m925jTO+9d5T5Jmit23/v/rv/v7J7N/OebrVanVY7K41G07aPF3AGhgHDgGHgFwyMZ5gwDBgGDAMxBowoxNiwvGHAMOD6Gg6KiYHvv//effvtt47jd999p0fyIf3444/u559/dj/99FPJMass1BlvvPFcSOOPP77m00eux2UTTjihS6eJJprIkSaeeGLXp0+fYiK4g3ttRKEJL58J+umnn7pPPvlEj+Q///zzJH3xxRea5/jll1+6r776Kkmcf/311+6bb77RBCEgz+QuAkAYJplkEiUQHCeddFI32WSTJWnyySfXPMcpp5yyJE0xxRRuqqmmctNMM42beuqp9UgbBo3FQB8TNNaGYFbVjz76yL3//vvuvffe0yP5Dz/8UMu5FuchAEzsLGA1jScCkyBMEiZOnGcyxClMNtoIK3Wc79u3b8mKXg0HgMw5cA2VOIpQh2PgTNLcCoQrELCYoAWCFxM/8jFhhGBSL0sGzrNCJKaddlo33XTTaZp++umT/IwzzujSCVwZVI8BIwq/4IoB+MEHH7g333wzSW+//bZ75513ksQ5Ez5epWGPGaQzzDBDMjDjQcq1eKULKx7EgAFukI0BcAyhiDmswGlxhPjGifdC4h3CmcUArmeZZRZNs846a5KfbbbZ3BxzzOFmn312R/kEE0wQ/61j8x1DFBhkTPixY8e6V1991b322mvJkfxbb72le/MwElilGTRhMM0888xJfqaZZkpWI4gBq7JBPjAAcYdowL2F9O677yaEPRD5QOADNwInxXuFSPTr18/NNddcyXHuued288wzj26B8vGUje1FWxEFXvDrr7/uRo8e7UaNGqXHl19+2ZFeeeUVZXVBJysCqwMvPqQ555xTyygnsZc1aG8MsOVhMYi5QxaIsGAwluBWADhCuIl5551X0/zzz+8WWGAB179/f0eerVu7QCGJAntZJvpzzz2XpOeff9699NJLKoTj5cAy8rJIUHleZjjCAbAyGBgGusPAxx9/rNwl4w0uMywyLDxwGwBjicVloYUWcossskiSOEc2VDTIPVFA4PTEE0+4J5980j311FOann32WZ38UG/YvYUXXlgTLwHKTYLdNzAMNBIDCEhZiCAQL774omNhInGOABZiwWI0YMAAt8QSS+hxqaWWUo6jkf3qbdu5Igo//PCDTvoHH3zQPfroo+6RRx5RZCMPQNq8+OKLlySIAHt/A8NAnjAAJztmzBj3zDPPuKeffjpJbGEB5FTLLLOMpoEDBzoSAui8QEuJAqqn++67z91zzz3ugQceUCKA+goCsNxyy7mll17aQVlJ/UT4Y2AYKDIG0KTA9T722GPu8ccf1/EO8YDjZYFbYYUV3IorruhWWWWVlo73phIF9Nb33nuvu+WWW9xdd92lCEI4uNhiiykyfvWrXynVRA5gYBjoBAygVn3ooYcc3PH999+vR7bMyCggDquvvrobMmSIakaahY+GEwVYpmuuucbdcMMNShCQ+C655JJutdVW04eGOuaJdWoW4u0+hoEsDGBjARcB93zHHXfonIFIsHVea6213Prrr++WX375hgrKG0IU0Ar85z//cVdeeaVDKIgqZ5111tGHGjx4sG4PshBiZYYBw0ApBpCzwUnAXV9//fXKXWMct95667kttthCOYl628nUjSig673gggvcv//9b1UTQtk23XRTt8EGG6jktfRR7cwwYBjoCQYwvoLrvvzyy93tt9/uMI1nng0dOlRlEj1pM/2fXhEFtAJsDc466yylZMgCtt12W7fVVlu5+eabL30vOzcMGAbqiIHPPvtM59+//vUvJRCo4nfaaSdNmNb3FHpEFPDaO/vss92pp56qpqRbb72122WXXVRj0NOO2P8MA4aBnmMAQ6p//vOfOi8x795+++3d73//e7WTqLlVkf5XDaIu9Mcdd5wXLzQvRkP+pJNO8qJmqfr/VtEwYBhoLAbERsJfd911ftCgQV5kDX6HHXbwIuyv6aa4p1YFV1xxhRfHECUG5513nheLrar+Z5UMA4aB1mBAbH+8qDS9uI77Qw891IsWo6qOdEsURI/qN998cy++/P6YY47xcAt5BbFLV8r4xhtv9LqLYq6qXJFIfXvdVncNQMkvvvjiJIk1p/7lyCOP9BKzobu/N/S6OAT5q666yh9xxBENvU8tjdezTyeccIL/+9//ntyeiSR7dD1nPMXvRVSFSb0iZW666SYv8j5NYg/RbdcrEgUx0fTiPehFL+rFxrvbxlpd4bLLLiMy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t2J9Mgy0EANGFFqIfLu1YSCPGDCikMe3Yn0yDLQQA0YUWoh8u7VhII8YMKKQx7difTIMtBADRhRaiHy7tWEgjxgwopDHt2J9Mgy0EANGFFqIfLu1YSCPGDCikMe3Yn0yDLQQA0YUWoh8u7VhII8YMKKQx7difTIMtBADRhRaiHy7tWEgjxgwopDHt2J9Mgy0EANGFFqIfLu1YSCPGDCikMe3Yn0yDLQQA0YUWoh8u7VhII8YMKKQx7difTIMtBADRhRaiHy7tWEgjxgwopDHt2J9Mgy0EANGFFqIfLu1YSCPGDCikMe3Yn0yDLQQA328QAvvb7duAQaGDx/uzjzzzJI7jxkzxs0888xu8sknT8r79evnrr/++uTcMp2Bgb6d8Zj2lDEGPv/8c/f888/HRZp//fXXS8psvShBR8ec2PahY171uAfdeuutx52UyfXt29cNGzaszFUrbmcM2Pahnd9uhWdbeuml3RNPPOEqcQOvvfaam3POOSu0YpfaEQPGKbTjW63imYYOHerGGy/79ffp08cNHDjQCEIVeGzHKtmjoh2f1J6pBANbbLGF+/nnn0vKwgnEYvvttw+nduwwDBhR6LAXHh4XTcMqq6ySyS2wpdh8881DVTt2GAaMKHTYC48fN4sbGH/88d2qq67qZphhhriq5TsIA0YUOuhlpx91k0026cIpsKXIIhbp/9p5+2LAiEL7vttun2yqqaZy66yzjoM7CDDBBBO4jTbaKJzasQMxYEShA196/MjbbrttInDENmH99dd3U0wxRVzF8h2GASMKHfbC04+73nrruYknnliLf/zxRweRMOhsDBhR6Oz37yaZZBKHbAGYbLLJ3Nprr93hGLHHN9+HNhsDP/30k/v666/dV199pUfy33zzjYML4Fo4xvm5555bsbDccsu5m2++WWUMyBnYTsRH8hNNNJGbdNJJlYBwJFFm0D4YMDPnHL7LTz75xL333nvu/fffdx9//LEmyshzjPOffvppCRH4/vvvm/5EEItAIOA2kElMO+20bpppptGUlUflOdNMM6nqE+JjkB8MGFFo4rtglX7rrbccPgWkN954w7399ttaRvk777yjxOCHH34o6RUTrtwEm3rqqdXdOZ6U6TxbBCZe1sofypjYqCNjDiIr/+233yYcSMyNxNwJhCoQr5iAkf/ss89K/C0wqZ5uuunUbXu2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"
>
</div>

</div>

</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In this example, SoS first look for a step that can produce <code>test.vcf</code> and found the <code>call</code> step through pattern <code>{filename}.vcf</code>. It turns out that this step requires an existing input file <code>test.bam</code> but a missing dependent file <code>test.bam.bai</code>, so it continues to check the workflow to identify step <code>index</code> that generates <code>test.bam.bai</code> from <code>test.bam</code>. With all dependencies met, as illustrated by the DAG (Direct Acyclic Graph) of this workflow, two steps, <code>index</code> and <code>call</code> are executed to produce the output <code>test.vcf</code>. Please refer to a <a href="../tutorials/Auxiliary_Steps.ipynb">tutorial on auxiliary steps</a> for details.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Mixed-style-workflows">Mixed style workflows<a class="anchor-link" href="#Mixed-style-workflows">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Auxiliary steps provide a mechanism to produce missing targets and can also be used in forward-time workflows. The resulting workflows have a numbered "stem" steps and an arbitrary number of auxiliary steps that provide required input and dependent files for these steps. For example, the following example demonstrates the use of a nested workflow with two forward-style workflows with assistance from two auxiliary steps.</p>

</div>
</div>
</div><div class="cell border-box-sizing code_cell rendered lan_SoS">
	
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="o">%</span><span class="n">sandbox</span>

<span class="o">%</span><span class="n">preview</span> <span class="o">-</span><span class="n">n</span> <span class="n">mixed</span><span class="o">*.</span><span class="n">dot</span>
<span class="o">%</span><span class="n">run</span> <span class="o">-</span><span class="n">d</span> <span class="n">mixed</span>

<span class="p">[</span><span class="n">align_10</span><span class="p">]</span>
<span class="kn">depends:</span> <span class="s1">&#39;hg19.fa&#39;</span>
<span class="k">print</span><span class="p">(</span><span class="n">step_name</span><span class="p">)</span>
<span class="p">[</span><span class="n">align_20</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">step_name</span><span class="p">)</span>
<span class="p">[</span><span class="n">call_10</span><span class="p">]</span>
<span class="kn">depends:</span> <span class="s1">&#39;dbsnp.vcf&#39;</span><span class="p">,</span> <span class="s1">&#39;hg19.fa&#39;</span>
<span class="k">print</span><span class="p">(</span><span class="n">step_name</span><span class="p">)</span>
<span class="p">[</span><span class="n">call_20</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">step_name</span><span class="p">)</span>
<span class="p">[</span><span class="n">default</span><span class="p">]</span>
<span class="n">sos_run</span><span class="p">(</span><span class="s1">&#39;align+call&#39;</span><span class="p">)</span>

<span class="p">[</span><span class="n">refseq</span><span class="p">:</span> <span class="kp">provides</span><span class="o">=</span><span class="s1">&#39;hg19.fa&#39;</span><span class="p">]</span>
<span class="kn">run:</span>
    <span class="c1"># a real step would download a fasta file for hg19</span>
    <span class="n">touch</span> <span class="n">hg19</span><span class="o">.</span><span class="n">fa</span>

<span class="p">[</span><span class="n">dbsnp</span><span class="p">:</span> <span class="kp">provides</span><span class="o">=</span><span class="s1">&#39;dbsnp.vcf&#39;</span><span class="p">]</span>
<span class="kn">run:</span>
    <span class="n">touch</span> <span class="n">dbsnp</span><span class="o">.</span><span class="n">vcf</span>
</pre></div>

</div>
</div>
</div>

</div>
	</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Modularize-SoS-Workflow">Modularize SoS Workflow<a class="anchor-link" href="#Modularize-SoS-Workflow">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>SoS encourages verbatim inclusion of scripts in a single SoS Script (or Notebook) so that the entire workflow can be self-contained, easily readable and modifiable, can be easily versioned, archived and shared. Such workflows are robust to changes in dependent scripts or modulars and therefore more reproducible.</p>
<p>However, there are certainly cases when it makes more sense to keep parts of the workflow outside of a SoS script, user cases include but not limited to</p>
<ol>
<li>Parts of workflow that are meant to be the same across multiple workflows (e.g. a workflow to deliver and archive results).</li>
<li>Scripts that are long, or multi-file in nature, or functions that are designed to be reused by multiple scripts in the same or across SoS workflows.</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>SoS provides a number of features that allow the inclusion, importing, or execution of external functions, scripts, or workflows. They are scattered around the documentation so here is a summary of what you can do to modularize your SoS workflow:</p>
<table>
<thead><tr>
<th>Method</th>
<th>Example</th>
<th>Pros</th>
<th>Cons</th>
<th>Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>utility modules and libraries</strong></td>
<td><code>import my_module</code> in Python, <code>library(my_library)</code> in R etc</td>
<td>Most clean, and can be used for highly reusable components that worth the effort to formalize and maintain them.</td>
<td>It can be difficult to keep the modules backward compatible so changes in such modules might make a previous workflow non-reproducible.</td>
<td>It is usually not practical to rerun archived projects just to test compatibility of these modules.</td>
</tr>
<tr>
<td><strong>include shared configurations or functions</strong></td>
<td><code>python: input='utility.py'</code></td>
<td>Easier to maintain than modules, include the same scripts across actions or workflows</td>
<td>Without proper wrapping and testing, such functions tend to be changed easily and break previous workflow</td>
<td>Suitable only for configuration and functions that do not need to be changed.</td>
</tr>
<tr>
<td><strong>nested workflow</strong></td>
<td><code>sos_run(source="file.sos")</code></td>
<td>Allows the separation of a big workflow to multiple smaller workflows maintained in different SoS workflows. Very flexible because the workflows and sources can be determined programmatically.</td>
<td>The workflows should be logically and functionally separated so that changes in one workflow will not break the entire workflow.</td>
<td>Suitable for the creation of large workflows.</td>
</tr>
<tr>
<td><strong>external commands</strong></td>
<td><code>sh("sos run workflow")</code> in SoS or <code>!sos run workflow</code> in SoS Notebook</td>
<td>Similar to <code>sos_run</code> in SoS</td>
<td>Similar to <code>sos_run</code> in SoS</td>
<td>Useful for SoS notebooks with standardized sub-workflows</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
    </div>
  </div>
</body>

 


</html>
